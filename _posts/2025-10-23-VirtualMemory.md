---
layout: post
title: "ê°€ìƒë©”ëª¨ë¦¬"
categories: [ComputerScience, OperatingSystem]
author: cotes
published: true
---


ëª©ì°¨

ì„œë¡ 

ê°€ìƒ ë©”ëª¨ë¦¬ì˜ ì •ì˜ ë° í•„ìš”ì„±

ê°€ìƒ ë©”ëª¨ë¦¬ì˜ ë™ì‘ ì›ë¦¬ (ì£¼ì†Œ ë³€í™˜, í˜ì´ì§•, ìŠ¤ì™‘)

í˜ì´ì§€ êµì²´ ì•Œê³ ë¦¬ì¦˜ 

ê°€ìƒ ë©”ëª¨ë¦¬ì˜ ì£¼ìš” êµ¬ì„±ìš”ì†Œ (í˜ì´ì§€, í”„ë ˆì„, í˜ì´ì§€ í…Œì´ë¸”, MMU ë“±)

ê°€ìƒ ë©”ëª¨ë¦¬ì˜ ì¥ì ê³¼ ë‹¨ì 

ìŠ¤ë˜ì‹± ë° í˜ì´ì§€ í´íŠ¸

ìŠ¤ë ˆì‹± ë°©ì§€ ì•Œê³ ë¦¬ì¦˜

ìš´ì˜ì²´ì œë³„ ìŠ¤ì™‘ ë°©ì‹ ì°¨ì´ (ë¦¬ëˆ…ìŠ¤ vs ìœˆë„ìš°)

ìš”ì•½ ë° ê²°ë¡ 

# ê°€ìƒ ë©”ëª¨ë¦¬
ì‹¤ì œ ë©”ëª¨ë¦¬ í¬ê¸°ì™€ ìƒê´€ì—†ì´ ë©”ëª¨ë¦¬ë¥¼ ì´ìš©í•  ìˆ˜ ìˆë„ë¡ ê°€ìƒì˜ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ì‚¬ìš©í•˜ëŠ” ë°©ë²•ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, 100mb ë©”ëª¨ë¦¬ í¬ê¸°ì—ì„œ 200mb í¬ê¸°ì˜ í”„ë¡œì„¸ìŠ¤ë¥¼ ìˆ˜í–‰í•  ìˆ˜ ìˆë„ë¡ í•˜ëŠ”ê²ƒì…ë‹ˆë‹¤.

![BitOperations](https://parkmuhyeun.github.io/assets//img/blog/etc/operating%20system/vm_1.PNG)

ê·¸ë¦¼1 : ê°€ìƒ ë©”ëª¨ë¦¬ì˜ êµ¬ì¡°

### 1. ì„œë¡ 

ê°€ìƒ ë©”ëª¨ë¦¬(Virtual Memory)ëŠ” í˜„ëŒ€ ìš´ì˜ì²´ì œ(OS)ì˜ í•µì‹¬ ê°œë…ìœ¼ë¡œ, ë¬¼ë¦¬ì  ë©”ëª¨ë¦¬(RAM)ì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ê³  íš¨ìœ¨ì ì¸ ë©”ëª¨ë¦¬ ê´€ë¦¬ë¥¼ ê°€ëŠ¥í•˜ê²Œ í•©ë‹ˆë‹¤. ê°€ìƒ ë©”ëª¨ë¦¬ë¥¼ í†µí•´ í”„ë¡œì„¸ìŠ¤ëŠ” ì‹¤ì œ RAM í¬ê¸°ë³´ë‹¤ í›¨ì”¬ í° ì—°ì†ëœ ë©”ëª¨ë¦¬ ê³µê°„ì´ ìˆëŠ” ê²ƒì²˜ëŸ¼ ë™ì‘í•  ìˆ˜ ìˆìœ¼ë©°(ì˜¤ë²„ì»¤ë°‹), ì—¬ëŸ¬ í”„ë¡œê·¸ë¨ì„ ë™ì‹œì— ì‹¤í–‰í•˜ì—¬ë„ ì„œë¡œ ê°„ì„­ ì—†ì´ ë…ë¦½ì ì¸ ë©”ëª¨ë¦¬ ê³µê°„ì„ ê°–ë„ë¡ ë³´ì¥í•©ë‹ˆë‹¤. ë³¸ ê¸€ì—ì„œëŠ” ê°€ìƒ ë©”ëª¨ë¦¬ì˜ ì •ì˜ì™€ í•„ìš”ì„±, ë™ì‘ ì›ë¦¬(ì£¼ì†Œ ë³€í™˜, í˜ì´ì§•, ìŠ¤ì™‘ ê³¼ì •), ì£¼ìš” êµ¬ì„± ìš”ì†Œ, ì¥ì ê³¼ ë‹¨ì , í˜ì´ì§€ í´íŠ¸ ë° ìŠ¤ë˜ì‹± í˜„ìƒì˜ ì„¤ëª…, ê·¸ë¦¬ê³  ìš´ì˜ì²´ì œë³„(ë¦¬ëˆ…ìŠ¤ vs ìœˆë„ìš°) ìŠ¤ì™‘ ë°©ì‹ì˜ ì°¨ì´ë¥¼ ê¸°ìˆ í•©ë‹ˆë‹¤. ì´ë¥¼ í†µí•´ ê°€ìƒ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œì˜ ê°œë…ê³¼ êµ¬í˜„ìƒì˜ íŠ¹ì§•ì„ ì¢…í•©ì ìœ¼ë¡œ ì´í•´í•  ìˆ˜ ìˆì„ ê²ƒì…ë‹ˆë‹¤.

### 2. ê°€ìƒ ë©”ëª¨ë¦¬ì˜ ì •ì˜ ë° í•„ìš”ì„±

ê°€ìƒ ë©”ëª¨ë¦¬ëŠ” ìš´ì˜ì²´ì œê°€ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ë³´ë‹¤ í° ì—°ì†ì  ë©”ëª¨ë¦¬ë¥¼ ì œê³µí•˜ëŠ” ì¶”ìƒí™” ê¸°ë²•ì…ë‹ˆë‹¤. ì¦‰, ì‹¤ì œ RAM ìš©ëŸ‰ì´ í•œì •ë˜ì–´ ìˆì–´ë„ **ë””ìŠ¤í¬ ê³µê°„ì„ í™œìš©í•˜ì—¬ í”„ë¡œê·¸ë¨ì— í° ë©”ëª¨ë¦¬ê°€ ìˆëŠ” ë“¯í•œ â€œí™˜ìƒâ€**ì„ ì¤ë‹ˆë‹¤. ìš´ì˜ì²´ì œëŠ” **í”„ë¡œì„¸ìŠ¤ë¥¼ í˜ì´ì§€(page)**ë¼ëŠ” ì‘ì€ ë‹¨ìœ„(4kb)ë¡œ ë¶„í• í•˜ê³ , ì‹¤í–‰ì— ë‹¹ì¥ í•„ìš”í•˜ì§€ ì•Šì€ í˜ì´ì§€ë“¤ì€ ë””ìŠ¤í¬ì˜ ìŠ¤ì™‘ ì˜ì—­ìœ¼ë¡œ ë‚´ë³´ëƒˆë‹¤ê°€ í•„ìš”í•´ì§€ë©´ ë‹¤ì‹œ ê°€ì ¸ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ ì‘ë™í•©ë‹ˆë‹¤
ì´ëŸ¬í•œ ê¸°ë²•ì´ í•„ìš”í•œ ì´ìœ ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

**ë¬¼ë¦¬ ë©”ëª¨ë¦¬ ë¶€ì¡± ê·¹ë³µ**: í”„ë¡œê·¸ë¨ì´ ì‹¤ì œ RAMë³´ë‹¤ ì»¤ë„ ì „ì²´ë¥¼ í•œêº¼ë²ˆì— ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ì§€ ì•Šê³  í•„ìš”í•œ ë¶€ë¶„ë§Œ ì ì¬í•˜ì—¬ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ í¬ê¸°ë¥¼ ë„˜ëŠ” ëŒ€ê·œëª¨ í”„ë¡œê·¸ë¨ë„ ì‹¤í–‰ ê°€ëŠ¥í•©ë‹ˆë‹¤.

**íš¨ìœ¨ì ì¸ ë©”ëª¨ë¦¬ í™œìš©**: í•œì •ëœ RAMì„ ì—¬ëŸ¬ í”„ë¡œì„¸ìŠ¤ê°€ ë‚˜ëˆ  ì“°ë˜, ì ì‹œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” ë©”ëª¨ë¦¬ ê³µê°„ì€ ë””ìŠ¤í¬ë¡œ ë‚´ë³´ë‚´ì–´ RAMì„ ë¹„ìš°ê³ , í•„ìš”í•  ë•Œ ë‹¤ì‹œ ë¶ˆëŸ¬ì˜¤ëŠ” ë°©ì‹ìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ íš¨ìœ¨ì ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤. ì´ë¡œì¨ ë™ì‹œì— ë” ë§ì€ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

**í”„ë¡œì„¸ìŠ¤ ê²©ë¦¬ ë° ì•ˆì •ì„±**: **ê° í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ ë…ë¦½ëœ ê°€ìƒ ì£¼ì†Œ ê³µê°„ì„ ì œê³µ**í•˜ì—¬, í•œ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ ì ‘ê·¼ì´ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¹¨ë²”í•˜ì§€ ëª»í•˜ë„ë¡ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ **ë©”ëª¨ë¦¬ ê²©ë¦¬(memory isolation)**ëŠ” ì‹œìŠ¤í…œ ì•ˆì •ì„±ê³¼ ë³´ì•ˆì„ í–¥ìƒì‹œí‚µë‹ˆë‹¤.


**í”„ë¡œê·¸ë˜ë° í¸ì˜ì„±**: í”„ë¡œê·¸ë˜ë¨¸ëŠ” ë§ˆì¹˜ í° ì—°ì† ë©”ëª¨ë¦¬ê°€ ìˆëŠ” ê²ƒì²˜ëŸ¼ í”„ë¡œê·¸ë¨ì„ ì‘ì„±í•˜ë©´ ë˜ë©°, ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œì˜ ì„¸ë¶€ ì²˜ë¦¬(ì˜ˆ: ì˜¤ë²„ë ˆì´ ê´€ë¦¬ ë“±)ëŠ” ìš´ì˜ì²´ì œê°€ ë§¡ìŠµë‹ˆë‹¤. ì´ëŠ” ë³µì¡í•œ í”„ë¡œê·¸ë¨ì„ ë” ì‰½ê²Œ ê°œë°œí•  ìˆ˜ ìˆê²Œ í•´ì¤ë‹ˆë‹¤.

ì •ë¦¬í•˜ìë©´, ê°€ìƒ ë©”ëª¨ë¦¬ëŠ” ë””ìŠ¤í¬ë¥¼ ë³´ì¡°ê¸°ì–µì¥ì¹˜ë¡œ í™œìš©í•˜ì—¬ ì‹¤ì œ ë©”ëª¨ë¦¬ í•œê³„ë¥¼ ë„˜ëŠ” ì£¼ì†Œ ê³µê°„ì„ ì œê³µí•˜ê³ , í•„ìš”í•œ ë‚´ìš©ë§Œ ë©”ëª¨ë¦¬ì— ìœ ì§€í•˜ëŠ” ìŠ¤ë§ˆíŠ¸í•œ ê´€ë¦¬ë¡œ ì‹œìŠ¤í…œ ìì›ì˜ í™œìš©ë„ë¥¼ ë†’ì´ëŠ” ê¸°ìˆ ì…ë‹ˆë‹¤.

### 3. ê°€ìƒ ë©”ëª¨ë¦¬ì˜ ë™ì‘ ì›ë¦¬ (ì£¼ì†Œ ë³€í™˜, í˜ì´ì§•, ìŠ¤ì™‘)

ê°€ìƒ ë©”ëª¨ë¦¬ëŠ” í•˜ë“œì›¨ì–´ì™€ ì†Œí”„íŠ¸ì›¨ì–´ê°€ í˜‘ë ¥í•˜ì—¬ ì‘ë™í•©ë‹ˆë‹¤. CPUê°€ **ê°€ìƒ ì£¼ì†Œ(virtual address)**ë¥¼ ìƒì„±í•˜ë©´, ì´ë¥¼ ì‹¤ì œ **ë¬¼ë¦¬ ì£¼ì†Œ(physical address)**ë¡œ ë³€í™˜í•˜ì—¬ RAMì— ì ‘ê·¼í•´ì•¼ í•©ë‹ˆë‹¤. ì´ ê³¼ì •ì—ì„œ í˜ì´ì§•(paging) ê¸°ë²•ê³¼ ìŠ¤ì™‘(swap) ë™ì‘ì´ í•µì‹¬ì ìœ¼ë¡œ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.

### 3.1 ì£¼ì†Œ ë³€í™˜ê³¼ í˜ì´ì§•

í”„ë¡œì„¸ìŠ¤ì˜ ê°€ìƒ ì£¼ì†Œ ê³µê°„ì€ **ê°™ì€ í¬ê¸°ì˜ í˜ì´ì§€(page)**ë“¤ë¡œ ë‚˜ë‰˜ì–´ ìˆìœ¼ë©°, ë¬¼ë¦¬ ë©”ëª¨ë¦¬ëŠ” ëŒ€ì‘ë˜ëŠ” **í”„ë ˆì„(frame)**ë“¤ë¡œ êµ¬íšë˜ì–´ ìˆìŠµë‹ˆë‹¤. **í˜ì´ì§€ í…Œì´ë¸”(page table)**ì€ ê°€ìƒ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ë¬¼ë¦¬ í”„ë ˆì„ ë²ˆí˜¸ë¡œ ë§¤í•‘í•œ í‘œë¡œì„œ, ê° í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ ìš´ì˜ì²´ì œê°€ í•´ë‹¹ í…Œì´ë¸”ì„ ê´€ë¦¬í•©ë‹ˆë‹¤. CPUê°€ ì–´ë–¤ ê°€ìƒ ì£¼ì†Œë¥¼ ì ‘ê·¼í•  ë•Œ, ê°€ìƒ ì£¼ì†Œì˜ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ í˜ì´ì§€ í…Œì´ë¸”ì—ì„œ ì°¾ì•„ í•´ë‹¹ í˜ì´ì§€ê°€ ìƒì£¼í•˜ëŠ” ë¬¼ë¦¬ í”„ë ˆì„ ë²ˆí˜¸ë¥¼ ì–»ê³ , í˜ì´ì§€ ì˜¤í”„ì…‹(offset)ì„ ë”í•˜ì—¬ ì‹¤ì œ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ì‚°ì¶œí•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì£¼ì†Œ ë³€í™˜ ì‘ì—…ì€ ë³´í†µ 
**ë©”ëª¨ë¦¬ ê´€ë¦¬ ì¥ì¹˜(MMU)**ë¼ëŠ” í•˜ë“œì›¨ì–´ì— ì˜í•´ ìˆ˜í–‰ë˜ë©°, MMUëŠ” CPU ë‚´ì— ë‚´ì¥ë˜ì–´ ê³ ì†ìœ¼ë¡œ ì£¼ì†Œ ë³€í™˜ì„ ì²˜ë¦¬í•©ë‹ˆë‹¤.

í•˜ì§€ë§Œ í˜ì´ì§€ í…Œì´ë¸”ì´ ë©”ëª¨ë¦¬ì— ì¡´ì¬í•˜ë¯€ë¡œ ë§¤ë²ˆ ë©”ëª¨ë¦¬ ì ‘ê·¼ ì‹œ 2ë²ˆì˜ ë©”ëª¨ë¦¬ ì ‘ê·¼(í˜ì´ì§€ í…Œì´ë¸” ì¡°íšŒ í›„ ì‹¤ì œ ë°ì´í„° ì ‘ê·¼)ì´ í•„ìš”í•˜ì—¬ ì„±ëŠ¥ ì €í•˜ê°€ ë°œìƒí•©ë‹ˆë‹¤. ì´ë¥¼ ì™„í™”í•˜ê¸° ìœ„í•´ **TLB(Translation Lookaside Buffer)**ë¼ëŠ” ì£¼ì†Œ ë³€í™˜ ìºì‹œë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.

![BitOperations](https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdna%2FcANX34%2Fbtr9RwPiE8M%2FAAAAAAAAAAAAAAAAAAAAAGcqQP-LmOpiCGKVdvd5aRAE80I-cJ_ZOfNPs1SSaH3J%2Fimg.png%3Fcredential%3DyqXZFxpELC7KVnFOS48ylbz2pIh7yKj8%26expires%3D1761922799%26allow_ip%3D%26allow_referer%3D%26signature%3DIbgzjzK6YhzAnGDqsX9DkuGAX3s%253D)

ê·¸ë¦¼ 2: ê°€ìƒ ì£¼ì†Œë¥¼ ë¬¼ë¦¬ ì£¼ì†Œë¡œ ë³€í™˜í•˜ëŠ” ê³¼ì •

![BitOperations](https://upload.wikimedia.org/wikipedia/commons/thumb/d/dc/MMU_principle_updated.png/960px-MMU_principle_updated.png)
ê·¸ë¦¼ 3: MMU ë™ì‘ êµ¬ì„±ë„

CPUê°€ ê°€ìƒ ì£¼ì†Œë¥¼ ìƒì„±í•˜ë©´ MMUê°€ TLBë¥¼ ë¨¼ì € ì¡°íšŒí•˜ì—¬ í•´ë‹¹ **ê°€ìƒ í˜ì´ì§€ ë²ˆí˜¸ì— ëŒ€í•œ ë¬¼ë¦¬ í”„ë ˆì„ ë²ˆí˜¸ê°€ ìºì‹œì— ì¡´ì¬í•˜ëŠ”ì§€ í™•ì¸(â‘ )**í•©ë‹ˆë‹¤. TLBì— í•´ë‹¹ í•­ëª©ì´ ìˆë‹¤ë©´(TLB íˆíŠ¸) ê³§ë°”ë¡œ í”„ë ˆì„ ë²ˆí˜¸ë¥¼ ì–»ì–´ ì˜¤í”„ì…‹ê³¼ ê²°í•©í•¨ìœ¼ë¡œì¨ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ê²°ì •í•˜ê³ , RAMì—ì„œ ë°ì´í„°ì— ì ‘ê·¼í•©ë‹ˆë‹¤. ë§Œì•½ TLBì— ì—†ë‹¤ë©´(TLB ë¯¸ìŠ¤) MMUëŠ” ë©”ëª¨ë¦¬ì— ìˆëŠ” í˜ì´ì§€ í…Œì´ë¸”ì„ ì°¸ê³ í•˜ì—¬(â‘¡) í•´ë‹¹ í˜ì´ì§€ì˜ í”„ë ˆì„ ë²ˆí˜¸ë¥¼ ì°¾ì•„ëƒ…ë‹ˆë‹¤. í˜ì´ì§€ í…Œì´ë¸” ì¡°íšŒë¡œ ì–»ì€ í”„ë ˆì„ ì •ë³´ëŠ” TLBì— ìƒˆë¡œ ì €ì¥í•˜ì—¬ ì´í›„ ì ‘ê·¼ì„ ë¹ ë¥´ê²Œ í•˜ê³ , ìµœì¢…ì ìœ¼ë¡œ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ êµ¬ì„±í•˜ì—¬ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ì²˜ëŸ¼ TLBë¥¼ í™œìš©í•˜ë©´ ìì£¼ ì°¸ì¡°ë˜ëŠ” í˜ì´ì§€ì˜ ì£¼ì†Œ ë³€í™˜ì„ ìºì‹œí•˜ì—¬ ë©”ëª¨ë¦¬ ì ‘ê·¼ ì„±ëŠ¥ì„ í–¥ìƒì‹œí‚¬ ìˆ˜ ìˆìŠµë‹ˆë‹¤.

í•œí¸, ê°€ìƒ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œì—ì„œ CPUê°€ ìš”êµ¬í•œ ê°€ìƒ ì£¼ì†Œê°€ í˜„ì¬ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ì— ì—†ì„ ê²½ìš° (ì˜ˆ: í•´ë‹¹ í˜ì´ì§€ê°€ ì•„ì§ ì ì¬ë˜ì§€ ì•Šì•˜ê±°ë‚˜ í•œë•Œ ì ì¬ë˜ì—ˆì§€ë§Œ ìŠ¤ì™‘ ì•„ì›ƒëœ ê²½ìš°), **í˜ì´ì§€ í´íŠ¸(page fault)**ê°€ ë°œìƒí•©ë‹ˆë‹¤. í˜ì´ì§€ í´íŠ¸ê°€ ì¼ì–´ë‚˜ë©´ í•˜ë“œì›¨ì–´ê°€ CPUì˜ ì œì–´ë¥¼ ìš´ì˜ì²´ì œ ì»¤ë„ì— ë„˜ê²¨ í•´ë‹¹ í˜ì´ì§€ë¥¼ ë””ìŠ¤í¬ì—ì„œ ì½ì–´ì™€ ë©”ëª¨ë¦¬ì— ì ì¬í•˜ëŠ” ì¼ë ¨ì˜ ê³¼ì •ì„ íŠ¸ë¦¬ê±°í•©ë‹ˆë‹¤. í˜ì´ì§€ í´íŠ¸ ì²˜ë¦¬ ê³¼ì •ì€ í›„ìˆ í•˜ëŠ” 6ì¥ì—ì„œ ìƒì„¸íˆ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤.

### 3.2 ìŠ¤ì™‘ê³¼ í˜ì´ì§€ êµì²´ ì•Œê³ ë¦¬ì¦˜

**ìŠ¤ì™‘(swap)**ì´ë€ ì‚¬ìš©ë˜ì§€ ì•ŠëŠ” í˜ì´ì§€ë¥¼ ë””ìŠ¤í¬ìƒì˜ ìŠ¤ì™‘ ì˜ì—­ìœ¼ë¡œ ë‚´ë³´ë‚´ê³ (ìŠ¤ì™‘ ì•„ì›ƒ, swap-out), í•„ìš”í•œ í˜ì´ì§€ë¥¼ ë””ìŠ¤í¬ì—ì„œ ë©”ëª¨ë¦¬ë¡œ ë¶ˆëŸ¬ì˜¤ëŠ”(ìŠ¤ì™‘ ì¸, swap-in) ê³¼ì •ì„ ëœ»í•©ë‹ˆë‹¤. ê°€ìƒ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œì€ ì¼ë°˜ì ìœ¼ë¡œ **ì§€ì—° ë¡œë”©(demand paging)** ë°©ì‹ì„ ì‚¬ìš©í•˜ì—¬, **í”„ë¡œê·¸ë¨ ì‹¤í–‰ ì‹œ ì²˜ìŒë¶€í„° ëª¨ë“  í˜ì´ì§€ë¥¼ ë‹¤ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ì§€ ì•Šê³  ì‹¤ì œ ì ‘ê·¼ë˜ëŠ” ì‹œì ì— ë””ìŠ¤í¬ì—ì„œ ê°€ì ¸ì˜¤ëŠ” ì „ëµì„ ì·¨í•©ë‹ˆë‹¤.** ì´ì— ë”°ë¼ ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•´ì§€ë©´ ì˜¤ë˜ ì‚¬ìš©í•˜ì§€ ì•Šì€ í˜ì´ì§€ë¥¼ ë‚´ë³´ë‚´ ê³µê°„ì„ í™•ë³´í•˜ê³ , ìƒˆë¡œìš´ í˜ì´ì§€ë¥¼ ê°€ì ¸ì˜¤ëŠ” **í˜ì´ì§€ êµì²´(page replacement)**ê°€ ì´ë£¨ì–´ì§‘ë‹ˆë‹¤.

í˜ì´ì§€ êµì²´ ì‹œ ìš´ì˜ì²´ì œëŠ” íŠ¹ì • ì•Œê³ ë¦¬ì¦˜(ì˜ˆ: FIFO, LRU, ìµœì  ì•Œê³ ë¦¬ì¦˜ ë“±)ì„ ì‚¬ìš©í•˜ì—¬ ì–´ë–¤ í˜ì´ì§€ë¥¼ ë‚´ë³´ë‚¼ì§€ ê²°ì •í•©ë‹ˆë‹¤. **ì¼ë°˜ì ìœ¼ë¡œ ê°€ì¥ ì˜¤ë«ë™ì•ˆ ì‚¬ìš©ë˜ì§€ ì•Šì€ í˜ì´ì§€ë¥¼ êµì²´í•˜ëŠ” ë“± í˜ì´ì§€ í´íŠ¸ ë°œìƒë¥ ì„ ìµœì†Œí™”í•˜ëŠ” ì „ëµì´ ì‚¬ìš©ë©ë‹ˆë‹¤.** ìŠ¤ì™‘ ì•„ì›ƒë˜ëŠ” í˜ì´ì§€ê°€ ë‚˜ì¤‘ì— ë‹¤ì‹œ í•„ìš”í•´ì§€ë©´ ë””ìŠ¤í¬ì—ì„œ ì½ì–´ì™€ ì¬ì ì¬í•˜ë©°, ì´ ë•Œ ë‹¤ë¥¸ í˜ì´ì§€ê°€ ë‹¤ì‹œ ì„ íƒì ìœ¼ë¡œ ë‚´ë³´ë‚´ì§ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. **ì´ëŸ¬í•œ ë°©ì‹ìœ¼ë¡œ ìš´ì˜ì²´ì œëŠ” ë¬¼ë¦¬ ë©”ëª¨ë¦¬ í¬ê¸° ì´ìƒì˜ í”„ë¡œê·¸ë¨ë„ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•˜ë©°, ë””ìŠ¤í¬ë¥¼ ë§ˆì¹˜ ì¶”ê°€ ë©”ëª¨ë¦¬ì²˜ëŸ¼ í™œìš©í•©ë‹ˆë‹¤.** 

| ì•Œê³ ë¦¬ì¦˜                        | í•µì‹¬ ì•„ì´ë””ì–´                   | êµ¬í˜„ ë‚œì´ë„ | ì„±ëŠ¥       |
| --------------------------- | ------------------------- | ------ | -------- |
| FIFO (First-In First-Out)   | ê°€ì¥ ì˜¤ë˜ëœ í˜ì´ì§€ êµì²´             | â˜…â˜†â˜†    | ë‚®ìŒ       |
| OPT (Optimal)               | ì•ìœ¼ë¡œ ê°€ì¥ ì˜¤ë«ë™ì•ˆ ì“°ì´ì§€ ì•Šì„ í˜ì´ì§€ êµì²´ | â˜…â˜…â˜…    | ìµœê³  (ì´ë¡ ì ) |
| LRU (Least Recently Used)   | ê°€ì¥ ì˜¤ë˜ ì°¸ì¡°ë˜ì§€ ì•Šì€ í˜ì´ì§€ êµì²´      | â˜…â˜…â˜†    | ë†’ìŒ       |
| LFU (Least Frequently Used) | ì°¸ì¡° íšŸìˆ˜ê°€ ê°€ì¥ ì ì€ í˜ì´ì§€ êµì²´       | â˜…â˜…â˜†    | ì¤‘ê°„       |
| Clock (Second-Chance)       | LRU ê·¼ì‚¬ êµ¬í˜„ (Reference Bit) | â˜…â˜…â˜†    | ì‹¤ìš©ì       |
| NRU (Not Recently Used)     | ìµœê·¼ ì°¸ì¡° ë° ìˆ˜ì • ì—¬ë¶€ ê¸°ë°˜          | â˜…â˜†â˜†    | ì¤‘ê°„       |
| WSClock (Working Set Clock) | Clock + Working Set ê²°í•©    | â˜…â˜…â˜…    | ë§¤ìš° íš¨ìœ¨ì    |

1) FIFO (First-In First-Out)

â€œê°€ì¥ ë¨¼ì € ë“¤ì–´ì˜¨ í˜ì´ì§€ê°€ ê°€ì¥ ë¨¼ì € ë‚˜ê°„ë‹¤.â€

í(Queue) í˜•íƒœë¡œ í˜ì´ì§€ë¥¼ ê´€ë¦¬

ê°€ì¥ ì˜¤ë˜ ë©”ëª¨ë¦¬ì— ìˆë˜ í˜ì´ì§€ë¥¼ êµì²´

êµ¬í˜„ ê°„ë‹¨í•˜ì§€ë§Œ, Beladyâ€™s anomaly(ì´ìƒí˜„ìƒ) ë°œìƒ ê°€ëŠ¥
â†’ ë©”ëª¨ë¦¬ë¥¼ ëŠ˜ë ¸ëŠ”ë°ë„ í˜ì´ì§€ í´íŠ¸ê°€ ì¦ê°€í•  ìˆ˜ ìˆìŒ

```
í˜ì´ì§€ ì°¸ì¡°ì—´: 7, 0, 1, 2, 0, 3, 0, 4
í”„ë ˆì„ ìˆ˜: 3
```
êµì²´ ìˆœì„œ: 7 â†’ 0 â†’ 1 â†’ (2ê°€ ë“¤ì–´ì˜¤ë©´ 7 êµì²´)

2) OPT (Optimal Replacement)

â€œì•ìœ¼ë¡œ ê°€ì¥ ì˜¤ë«ë™ì•ˆ ì‚¬ìš©ë˜ì§€ ì•Šì„ í˜ì´ì§€ë¥¼ êµì²´í•œë‹¤.â€

ì´ë¡ ì ìœ¼ë¡œ ê°€ì¥ ì ì€ í˜ì´ì§€ í´íŠ¸ë¥¼ ë³´ì¥

ë¯¸ë˜ì˜ ì°¸ì¡°ë¥¼ ì•Œì•„ì•¼ í•˜ë¯€ë¡œ ì‹¤ì œ ì‹œìŠ¤í…œì—ì„œëŠ” êµ¬í˜„ ë¶ˆê°€ëŠ¥

ë‹¤ë¥¸ ì•Œê³ ë¦¬ì¦˜ì˜ ë¹„êµ ê¸°ì¤€(upper bound) ìœ¼ë¡œ ì‚¬ìš©ë¨

(3) LRU (Least Recently Used)

â€œê°€ì¥ ì˜¤ë«ë™ì•ˆ ì°¸ì¡°ë˜ì§€ ì•Šì€ í˜ì´ì§€ë¥¼ êµì²´í•œë‹¤.â€

â€œìµœê·¼ì— ì‚¬ìš©ëœ í˜ì´ì§€ëŠ” ë‹¤ì‹œ ì‚¬ìš©í•  ê°€ëŠ¥ì„±ì´ ë†’ë‹¤â€ëŠ” ì‹œê°„ì  ì§€ì—­ì„±(Temporal Locality) ê¸°ë°˜

ê° í˜ì´ì§€ì˜ ìµœê·¼ ì ‘ê·¼ ì‹œê°ì„ ì €ì¥í•´ ê°€ì¥ ì˜¤ë˜ëœ í˜ì´ì§€ ì œê±°

| êµ¬í˜„ë²•     | ì„¤ëª…                     | ì˜¤ë²„í—¤ë“œ      |
| ------- | ---------------------- | --------- |
| ì¹´ìš´í„° ê¸°ë°˜  | ì°¸ì¡° ì‹œì ì˜ íƒ€ì„ìŠ¤íƒ¬í”„ ì €ì¥        | ë†’ìŒ        |
| ìŠ¤íƒ ê¸°ë°˜   | ì°¸ì¡° ì‹œë§ˆë‹¤ í˜ì´ì§€ë¥¼ ìŠ¤íƒ ë§¨ ìœ„ë¡œ ì´ë™ | ì¤‘ê°„        |
| í•˜ë“œì›¨ì–´ ì§€ì› | ì°¸ì¡° ë¹„íŠ¸/íƒ€ì´ë¨¸ë¡œ ì¶”ì           | ë‚®ìŒ (ì§€ì› ì‹œ) |

(4) LFU (Least Frequently Used)

â€œê°€ì¥ ì ê²Œ ì°¸ì¡°ëœ í˜ì´ì§€ë¥¼ êµì²´í•œë‹¤.â€

ì°¸ì¡° íšŸìˆ˜ë¥¼ ì¹´ìš´íŠ¸

ìì£¼ ì“°ì´ëŠ” í˜ì´ì§€ëŠ” ë‚¨ê¸°ê³ , ê±°ì˜ ì•ˆ ì“°ì¸ í˜ì´ì§€ë¥¼ êµì²´

ë‹¨ì : ìµœê·¼ì— ì§‘ì¤‘ì ìœ¼ë¡œ ì‚¬ìš©ëœ í˜ì´ì§€ë¥¼ ê³¼ì†Œí‰ê°€í•  ìˆ˜ ìˆìŒ (ì‹œê°„ì  í¸í–¥)

ë³€í˜•

Aging LFU: ì˜¤ë˜ëœ ì°¸ì¡°ëŠ” ì ì°¨ ê°€ì¤‘ì¹˜ë¥¼ ë‚®ì¶¤

(5) Clock (Second-Chance) Algorithm

â€œLRUì˜ ê·¼ì‚¬í˜• êµ¬í˜„ (ì°¸ì¡° ë¹„íŠ¸ë¥¼ ì´ìš©í•œ ì›í˜• í ë°©ì‹)â€

ë™ì‘ ì›ë¦¬

í˜ì´ì§€ë§ˆë‹¤ Reference Bit(ì°¸ì¡° ë¹„íŠ¸) ê°€ ì¡´ì¬ (0 or 1)

í˜ì´ì§€ê°€ ì°¸ì¡°ë˜ë©´ Bit=1ë¡œ ì„¤ì •

êµì²´ ì‹œ:

í¬ì¸í„°ê°€ ì‹œê³„ ë°©í–¥ìœ¼ë¡œ ì´ë™í•˜ë©° Bit í™•ì¸

Bit=1 â†’ 0ìœ¼ë¡œ ë¦¬ì…‹ í›„ â€œë‘ ë²ˆì§¸ ê¸°íšŒ ë¶€ì—¬â€

Bit=0 â†’ êµì²´ ëŒ€ìƒ ì„ ì •

```
ì‹œê³„ ì›í˜• êµ¬ì¡°:
[Page1(R=1)] â†’ [Page2(R=0)] â†’ [Page3(R=1)] â†’ ...

```
â†’ í¬ì¸í„°ê°€ ëŒë©° R=0ì¸ ì²« í˜ì´ì§€ë¥¼ êµì²´

ì¥ì : êµ¬í˜„ ê°„ë‹¨, íš¨ìœ¨ ì¢‹ìŒ
ë‹¨ì : ì™„ì „í•œ LRUë³´ë‹¨ ê·¼ì‚¬ê°’

(6) NRU (Not Recently Used)

â€œìµœê·¼ ì°¸ì¡° ì—¬ë¶€ì™€ ìˆ˜ì • ì—¬ë¶€ë¥¼ ì¡°í•©í•´ ìš°ì„ ìˆœìœ„ ê²°ì •â€

ê° í˜ì´ì§€ëŠ” ë‘ ê°œì˜ ë¹„íŠ¸ë¥¼ ê°€ì§:

| ë¹„íŠ¸ | ì˜ë¯¸                            |
| -- | ----------------------------- |
| R  | Reference bit (ìµœê·¼ ì ‘ê·¼ ì—¬ë¶€)      |
| M  | Modify bit (ìˆ˜ì • ì—¬ë¶€, Dirty bit) |

| í´ë˜ìŠ¤ | R | M | êµì²´ ìš°ì„ ìˆœìœ„        |
| --- | - | - | -------------- |
| 0   | 0 | 0 | 1ï¸âƒ£ (ê°€ì¥ ë¨¼ì € êµì²´) |
| 1   | 0 | 1 | 2ï¸âƒ£            |
| 2   | 1 | 0 | 3ï¸âƒ£            |
| 3   | 1 | 1 | 4ï¸âƒ£ (ê°€ì¥ ëŠ¦ê²Œ êµì²´) |

(7) WSClock (Working Set Clock)

â€œClock ì•Œê³ ë¦¬ì¦˜ + Working Set ê°œë… ê²°í•©â€

ê° í˜ì´ì§€ì— â€œìµœê·¼ ì°¸ì¡° ì‹œê°„â€ê³¼ â€œDirty bitâ€ ìœ ì§€

Î” (Window) ì‹œê°„ ë™ì•ˆ ì°¸ì¡°ë˜ì§€ ì•Šìœ¼ë©´ êµì²´ í›„ë³´

Dirty í˜ì´ì§€ëŠ” ì¦‰ì‹œ êµì²´í•˜ì§€ ì•Šê³ , ë°±ê·¸ë¼ìš´ë“œì—ì„œ ë¹„ë™ê¸°ì ìœ¼ë¡œ ë””ìŠ¤í¬ì— ê¸°ë¡

ì¥ì :

Thrashing ë°©ì§€ íš¨ê³¼ ìš°ìˆ˜ (Trashingì€ ì•„ë˜ì—ì„œ ë‹¤ë£¨ê² ìŠµë‹ˆë‹¤)

LRU ê·¼ì‚¬ + Working Set ê¸°ë°˜ìœ¼ë¡œ ì•ˆì •ì 

í˜„ëŒ€ OS (ì˜ˆ: Linux, Windows)ì—ì„œ ë³€í˜•ëœ í˜•íƒœë¡œ ì‚¬ìš©

| ì•Œê³ ë¦¬ì¦˜    | êµ¬í˜„ ë³µì¡ë„ | ì°¸ì¡° í•„ìš” ì •ë³´          | Beladyâ€™s anomaly | ì„±ëŠ¥(í˜ì´ì§€ í´íŠ¸ìœ¨) |
| ------- | ------ | ----------------- | ---------------- | ----------- |
| FIFO    | ë‚®ìŒ     | ë„ì°© ìˆœì„œ             | âŒ ìˆìŒ             | ë‚®ìŒ          |
| OPT     | ë†’ìŒ     | ë¯¸ë˜ ì°¸ì¡°             | âŒ ì—†ìŒ             | ìµœê³  (ì´ë¡ ì )    |
| LRU     | ì¤‘ê°„     | ê³¼ê±° ì°¸ì¡°             | âŒ ì—†ìŒ             | ë†’ìŒ          |
| LFU     | ì¤‘ê°„     | ì°¸ì¡° íšŸìˆ˜             | âŒ ì—†ìŒ             | ì¤‘ê°„          |
| Clock   | ì¤‘ê°„     | ì°¸ì¡° ë¹„íŠ¸             | âŒ ì—†ìŒ             | ë†’ìŒ          |
| NRU     | ë‚®ìŒ     | R, M ë¹„íŠ¸           | âŒ ì—†ìŒ             | ì¤‘ê°„          |




í˜„ëŒ€ ìš´ì˜ì²´ì œ(ì˜ˆ: ë¦¬ëˆ…ìŠ¤, ìœˆë„ìš°)ëŠ” ì¼ë°˜ì ìœ¼ë¡œ í”„ë¡œì„¸ìŠ¤ ì „ì²´ë¥¼ í†µì§¸ë¡œ ìŠ¤ì™‘í•˜ì§€ ì•Šê³  í˜ì´ì§€ ë‹¨ìœ„ë¡œ ìŠ¤ì™‘í•©ë‹ˆë‹¤. ê³¼ê±°ì˜ ì „í†µì ì¸ ìœ ë‹‰ìŠ¤ ì‹œìŠ¤í…œì—ì„œëŠ” ë©”ëª¨ë¦¬ê°€ ë¶€ì¡±í•  ë•Œ í”„ë¡œì„¸ìŠ¤ ì „ì²´ë¥¼ ë””ìŠ¤í¬ë¡œ ë‚´ë³´ë‚´ëŠ” ìŠ¤ì™€í•‘ì„ ì‚¬ìš©í•˜ê¸°ë„ í–ˆìœ¼ë‚˜, ì „ì²´ í”„ë¡œì„¸ìŠ¤ë¥¼ ì˜®ê¸°ëŠ” ë° ê±¸ë¦¬ëŠ” ì‹œê°„ì´ ë„ˆë¬´ í¬ê¸° ë•Œë¬¸ì— í˜„ì¬ëŠ” ë¶€ë¶„ì ì¸ í˜ì´ì§• ê¸°ë²•(ì¼ë¶€ í˜ì´ì§€ë§Œ êµì²´)ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ëŠ” ë¬¼ë¦¬ ë©”ëª¨ë¦¬ë¥¼ ì´ˆê³¼í•˜ì—¬ë„ ì„±ëŠ¥ ì €í•˜ë¥¼ ìµœì†Œí™”í•˜ë©´ì„œ ë©”ëª¨ë¦¬ë¥¼ ê³¼í• ë‹¹(over-subscribe)í•  ìˆ˜ ìˆëŠ” ìœ ì—°í•œ ë°©ë²•ì…ë‹ˆë‹¤.

### 4. ê°€ìƒ ë©”ëª¨ë¦¬ì˜ ì£¼ìš” êµ¬ì„±ìš”ì†Œ (í˜ì´ì§€, í”„ë ˆì„, í˜ì´ì§€ í…Œì´ë¸”, MMU ë“±)

ê°€ìƒ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œì„ êµ¬ì„±í•˜ëŠ” ì£¼ìš” ìš”ì†ŒëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤:

**í˜ì´ì§€(Page)**: ê°€ìƒ ë©”ëª¨ë¦¬ì—ì„œì˜ ê³ ì • í¬ê¸° ë°ì´í„° ë¸”ë¡ì„ ë§í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ìˆ˜ KB í¬ê¸°(ì˜ˆ: 4KB)ë¡œ ì •ì˜ë˜ë©°, í”„ë¡œê·¸ë¨ì˜ ì£¼ì†Œ ê³µê°„ì€ ì—¬ëŸ¬ ê°œì˜ í˜ì´ì§€ë¡œ ë¶„í• ë©ë‹ˆë‹¤. í˜ì´ì§€ëŠ” ê°€ìƒ ì£¼ì†Œ ê³µê°„ìƒì˜ ì¡°ê°ìœ¼ë¡œì„œ, ê° í˜ì´ì§€ì—ëŠ” ì—°ì†ëœ ê°€ìƒ ì£¼ì†Œ ë²”ìœ„ê°€ ë“¤ì–´ ìˆìŠµë‹ˆë‹¤.

**í”„ë ˆì„(Frame)**: ë¬¼ë¦¬ ë©”ëª¨ë¦¬(RAM)ë¥¼ í˜ì´ì§€ì™€ ë™ì¼í•œ í¬ê¸°ë¡œ ë‚˜ëˆˆ ê³ ì • í¬ê¸° ë¸”ë¡ì…ë‹ˆë‹¤. **í”„ë ˆì„ì€ ì‹¤ì œ ë©”ëª¨ë¦¬ìƒì˜ ìŠ¬ë¡¯ìœ¼ë¡œ, ê° í”„ë ˆì„ì— í•˜ë‚˜ì˜ í˜ì´ì§€ë¥¼ ì ì¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.** ì¦‰, í˜ì´ì§€ê°€ í¼ì¦ ì¡°ê°ì´ë¼ë©´ í”„ë ˆì„ì€ ê·¸ ì¡°ê°ì´ ë“¤ì–´ê°€ëŠ” ë³´ë“œì˜ ì¹¸ì— ë¹„ìœ í•  ìˆ˜ ìˆìœ¼ë©°, ê°€ìƒ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œì—ì„œ í˜ì´ì§€ì™€ í”„ë ˆì„ì€ 1:1 í¬ê¸°ë¡œ ëŒ€ì‘ë©ë‹ˆë‹¤.

**í˜ì´ì§€ í…Œì´ë¸”(Page Table)**: **ê°€ìƒ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ë¬¼ë¦¬ í”„ë ˆì„ ë²ˆí˜¸ì— ë§¤í•‘í•˜ëŠ” í…Œì´ë¸” ì…ë‹ˆë‹¤.** ìš´ì˜ì²´ì œëŠ” í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ ë³„ë„ì˜ í˜ì´ì§€ í…Œì´ë¸”ì„ ìœ ì§€í•˜ë©°, ê° **í˜ì´ì§€ í…Œì´ë¸” ì—”íŠ¸ë¦¬(PTE)**ì—ëŠ” í•´ë‹¹ ê°€ìƒ í˜ì´ì§€ê°€ í˜„ì¬ ì–´ëŠ í”„ë ˆì„ì— ìˆëŠ”ì§€ ë˜ëŠ” ì—†ë‹¤ë©´ ë””ìŠ¤í¬ì˜ ì–´ë””ì— ìˆëŠ”ì§€ ë“±ì˜ ì •ë³´ì™€ í•¨ê»˜ ìœ íš¨ ë¹„íŠ¸, ë³€ê²½ ë¹„íŠ¸(ë”í‹° ë¹„íŠ¸) ë“± ìƒíƒœ ì •ë³´ê°€ í¬í•¨ë©ë‹ˆë‹¤. í˜ì´ì§€ í…Œì´ë¸”ì€ CPUê°€ ê°€ìƒ ì£¼ì†Œë¥¼ ë³€í™˜í•  ë•Œ ì°¸ê³ í•˜ëŠ” ê¸°ë³¸ ìë£Œêµ¬ì¡°ë¡œì„œ, ì¼ë°˜ì ìœ¼ë¡œ ë©”ëª¨ë¦¬ì— ì €ì¥ë˜ì§€ë§Œ CPU ë ˆì§€ìŠ¤í„°ì— í˜ì´ì§€ í…Œì´ë¸”ì˜ ì‹œì‘ ì£¼ì†Œ(ë² ì´ìŠ¤ ë ˆì§€ìŠ¤í„°) ë“±ì„ ë³´ê´€í•˜ì—¬ ë¹ ë¥´ê²Œ ì ‘ê·¼í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤.

**ë©”ëª¨ë¦¬ ê´€ë¦¬ ì¥ì¹˜(MMU, Memory Management Unit)**: CPU ë‚´ì§€ ë©”ëª¨ë¦¬ ì„œë¸Œì‹œìŠ¤í…œì— í¬í•¨ëœ í•˜ë“œì›¨ì–´ ëª¨ë“ˆë¡œ, ê°€ìƒ ì£¼ì†Œë¥¼ ë¬¼ë¦¬ ì£¼ì†Œë¡œ ë³€í™˜í•˜ëŠ” ì—­í• ì„ í•©ë‹ˆë‹¤. MMUëŠ” í˜„ì¬ ì‹¤í–‰ ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ì˜ í˜ì´ì§€ í…Œì´ë¸”ì„ ì°¸ê³ í•˜ì—¬ ê°€ìƒ í˜ì´ì§€ ë²ˆí˜¸ë¥¼ ë¬¼ë¦¬ í”„ë ˆì„ìœ¼ë¡œ ë§¤í•‘í•˜ê³ , ê²°ê³¼ ë¬¼ë¦¬ ì£¼ì†Œë¡œ ë©”ëª¨ë¦¬ì— ì ‘ê·¼í•©ë‹ˆë‹¤. ë˜í•œ **ë©”ëª¨ë¦¬ ë³´í˜¸ë¥¼ ìœ„í•´ ì˜ëª»ëœ ë©”ëª¨ë¦¬ ì ‘ê·¼ì„ ê°ì§€í•˜ë©´ CPUì— íŠ¸ë©(ì˜ˆ: í˜ì´ì§€ í´íŠ¸)ì„ ë°œìƒì‹œí‚µë‹ˆë‹¤** í˜„ëŒ€ MMUì—ëŠ” TLBì™€ ê°™ì€ ê³ ì† ìºì‹œê°€ ë‚´ì¥ë˜ì–´ ìˆì–´ ì£¼ì†Œ ë³€í™˜ì„ ê°€ì†í™”í•©ë‹ˆë‹¤.

**TLB(ë³€í™˜ ìƒ‰ì¸ ë²„í¼, Translation Lookaside Buffer)**: í˜ì´ì§€ í…Œì´ë¸” í•­ëª©ì„ ìºì‹±í•˜ëŠ” ì†Œí˜• ê³ ì† ë©”ëª¨ë¦¬ì…ë‹ˆë‹¤. TLBì—ëŠ” ìµœê·¼ì— ì‚¬ìš©ëœ ê°€ìƒ í˜ì´ì§€â†’ë¬¼ë¦¬ í”„ë ˆì„ ë§¤í•‘ì´ ì €ì¥ë˜ì–´ ìˆì–´, CPUê°€ ê°€ìƒ ì£¼ì†Œë¥¼ ë³€í™˜í•  ë•Œ ë¨¼ì € TLBë¥¼ ì¡°íšŒí•˜ì—¬ ì¼ì¹˜í•˜ëŠ” í•­ëª©ì´ ìˆìœ¼ë©´ í˜ì´ì§€ í…Œì´ë¸”ì— ì ‘ê·¼í•˜ì§€ ì•Šê³  ë°”ë¡œ ë¬¼ë¦¬ ì£¼ì†Œë¥¼ ì–»ìŠµë‹ˆë‹¤. TLBì— ì—†ëŠ” ê²½ìš°ì—ë§Œ ë©”ëª¨ë¦¬ì˜ í˜ì´ì§€ í…Œì´ë¸”ì„ ì ‘ê·¼í•˜ë¯€ë¡œ, **TLBì˜ ë†’ì€ ì ì¤‘ë¥ (hit ratio)**ì€ ê°€ìƒ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œ ì„±ëŠ¥ì— ë§¤ìš° ì¤‘ìš”í•©ë‹ˆë‹¤. TLBëŠ” ì¼ë°˜ì ìœ¼ë¡œ ìˆ˜ì‹­ì—ì„œ ìˆ˜ë°± ê°œì˜ í•­ëª©ì„ ê°€ì§€ë©°, ìºì‹œì™€ ìœ ì‚¬í•œ êµ¬ì¡°ë¡œ ë™ì‘í•©ë‹ˆë‹¤.

**ìŠ¤ì™‘ ê³µê°„(Swap Space)**: ë¬¼ë¦¬ ë©”ëª¨ë¦¬ì— ì˜¬ë¼ì˜¤ì§€ ì•Šì€ í˜ì´ì§€ë“¤ì„ ì €ì¥í•´ ë‘ëŠ” ë””ìŠ¤í¬ìƒì˜ ì˜ì—­ì…ë‹ˆë‹¤. ë¬¼ë¦¬ ë©”ëª¨ë¦¬ê°€ ëª¨ìë„ ë•Œ ì‚¬ìš©í•˜ì§€ ì•ŠëŠ” í˜ì´ì§€ë“¤ì„ ì´ ê³³ì— ì„ì‹œ ë³´ê´€í•˜ë©°, í•´ë‹¹ í˜ì´ì§€ê°€ ë‹¤ì‹œ í•„ìš”í•´ì§€ë©´ ìŠ¤ì™‘ ê³µê°„ì—ì„œ ì½ì–´ì˜µë‹ˆë‹¤. ìŠ¤ì™‘ ê³µê°„ì€ ìš´ì˜ì²´ì œì˜ ê°€ìƒ ë©”ëª¨ë¦¬ í™•ì¥ì„ ìœ„í•œ ê³µê°„ìœ¼ë¡œ, ìœ ë‹‰ìŠ¤ ê³„ì—´ OSì—ì„œëŠ” ì£¼ë¡œ ë³„ë„ì˜ ìŠ¤ì™‘ íŒŒí‹°ì…˜ìœ¼ë¡œ í• ë‹¹ë˜ê³  ìœˆë„ìš° ë“±ì—ì„œëŠ” **í˜ì´ì§€ íŒŒì¼(pagefile)**ì´ë¼ëŠ” ë””ìŠ¤í¬ íŒŒì¼ í˜•íƒœë¡œ ì¡´ì¬í•©ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ë¦¬ëˆ…ìŠ¤ëŠ” ì¼ë°˜ì ìœ¼ë¡œ /swap íŒŒí‹°ì…˜ì´ë‚˜ ìŠ¤ì™‘ íŒŒì¼ì„ ì‚¬ìš©í•˜ê³ , ìœˆë„ìš°ëŠ” pagefile.sysë¼ëŠ” íŒŒì¼ì„ í†µí•´ ìŠ¤ì™‘ ì˜ì—­ì„ êµ¬í˜„í•©ë‹ˆë‹¤.

### 5. ê°€ìƒ ë©”ëª¨ë¦¬ì˜ ì¥ì ê³¼ ë‹¨ì 

ê°€ìƒ ë©”ëª¨ë¦¬ ë„ì…ìœ¼ë¡œ ì–»ëŠ” ì´ì ê³¼ í•œê³„ëŠ” ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.

â‘  ì¥ì (Benefits):

**ëŒ€ìš©ëŸ‰ í”„ë¡œê·¸ë¨ ì§€ì› ë° ë‹¤ì¤‘ ì‘ì—… í–¥ìƒ**: ê°€ìƒ ë©”ëª¨ë¦¬ëŠ” ë¬¼ë¦¬ ë©”ëª¨ë¦¬ë³´ë‹¤ í° í”„ë¡œê·¸ë¨ë„ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•˜ë©°, ë™ì‹œì— ì—¬ëŸ¬ í”„ë¡œê·¸ë¨ì„ ë©”ëª¨ë¦¬ ë¶€ì¡± ì—†ì´ ì‹¤í–‰í•  ìˆ˜ ìˆë„ë¡ í•©ë‹ˆë‹¤. ì¦‰, ì‹¤ì œ RAM ì´ìƒìœ¼ë¡œ ë©”ëª¨ë¦¬ë¥¼ í™œìš©í•  ìˆ˜ ìˆìœ¼ë¯€ë¡œ ë©€í‹°í”„ë¡œê·¸ë˜ë°ì´ í–¥ìƒë˜ê³ , í° ì• í”Œë¦¬ì¼€ì´ì…˜ë„ êµ¬ë™ ê°€ëŠ¥í•©ë‹ˆë‹¤. í•„ìš” ì‹œ í”„ë¡œê·¸ë¨ì˜ ì¼ë¶€ë§Œ ë©”ëª¨ë¦¬ì— ì˜¬ë ¤ ì‹¤í–‰í•  ìˆ˜ ìˆì–´ ë©”ëª¨ë¦¬ ê³µê°„ ì œì•½ì„ ì™„í™”í•©ë‹ˆë‹¤.

**ë©”ëª¨ë¦¬ í™œìš© íš¨ìœ¨ ë° ë‹¨í¸í™” ê°ì†Œ**: ê°€ìƒ ë©”ëª¨ë¦¬ëŠ” ì‹¤ì œ ì‚¬ìš©ë˜ëŠ” ë°ì´í„°ë§Œ ë©”ëª¨ë¦¬ì— ìœ ì§€í•˜ê³  ë‚˜ë¨¸ì§€ëŠ” ë””ìŠ¤í¬ë¡œ ë³´ë‚´ë¯€ë¡œ ë©”ëª¨ë¦¬ ë‚­ë¹„ë¥¼ ì¤„ì´ê³  í™œìš©ë¥ ì„ ê·¹ëŒ€í™”í•©ë‹ˆë‹¤. ë˜í•œ ê³ ì • í¬ê¸° í˜ì´ì§€ë¥¼ ì‚¬ìš©í•¨ìœ¼ë¡œì¨ ì™¸ë¶€ ë‹¨í¸í™”ë¥¼ í”¼í•˜ê³ , ì—°ì†ëœ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ í• ë‹¹ì´ í•„ìš” ì—†ìœ¼ë¯€ë¡œ ë©”ëª¨ë¦¬ ê´€ë¦¬ê°€ ìˆ˜ì›”í•´ì§‘ë‹ˆë‹¤.

**í”„ë¡œì„¸ìŠ¤ ê°„ ê²©ë¦¬ì™€ ë³´ì•ˆ ê°•í™”**: ê° í”„ë¡œì„¸ìŠ¤ëŠ” ìê¸°ë§Œì˜ ê°€ìƒ ì£¼ì†Œ ê³µê°„ì„ ê°€ì§€ë¯€ë¡œ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ë¥¼ ì¹¨ë²”í•  ìˆ˜ ì—†ìŠµë‹ˆë‹¤. ì´ë¡œ ì¸í•´ í”„ë¡œì„¸ìŠ¤ ê°„ ê°„ì„­ì´ ì¤„ì–´ë“¤ê³  ì˜¤ë¥˜ ë° ì•…ì˜ì  ì ‘ê·¼ìœ¼ë¡œë¶€í„° ë³´í˜¸ë©ë‹ˆë‹¤. í•œ í”„ë¡œì„¸ìŠ¤ì˜ ë¹„ì •ìƒ ë™ì‘ì´ ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ ë©”ëª¨ë¦¬ë¥¼ ë®ì–´ì“°ì§€ ëª»í•˜ë¯€ë¡œ ì‹œìŠ¤í…œ ì•ˆì •ì„±ì´ ë†’ì•„ì§‘ë‹ˆë‹¤.

**í”„ë¡œê·¸ë¨ ê°œë°œ ë‹¨ìˆœí™”**: ê°œë°œìëŠ” ì‹¤ì œ ë©”ëª¨ë¦¬ í¬ê¸°ì— ì‹ ê²½ ì“°ì§€ ì•Šê³  í° ì£¼ì†Œ ê³µê°„ì„ ê°€ì •í•˜ì—¬ í”„ë¡œê·¸ë˜ë°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹œ ì–´ë–¤ ë¶€ë¶„ì„ ë””ìŠ¤í¬ë¡œ ë‚´ë³´ë‚¼ì§€ ë“±ì˜ ê³ ë¯¼ì€ ìš´ì˜ì²´ì œê°€ ì²˜ë¦¬í•˜ë¯€ë¡œ, ê°œë°œ ìƒì‚°ì„±ì´ í–¥ìƒë˜ê³  ë³µì¡í•œ ë©”ëª¨ë¦¬ ê´€ë¦¬ ì‘ì—…ì´ ë¶ˆí•„ìš”í•´ì§‘ë‹ˆë‹¤.

â‘¡ ë‹¨ì (Limitations):

**ì„±ëŠ¥ ì €í•˜ ê°€ëŠ¥ì„±**: ê°€ìƒ ë©”ëª¨ë¦¬ ì‚¬ìš©ìœ¼ë¡œ ì¸í•´ ì£¼ì†Œ ë³€í™˜ ì˜¤ë²„í—¤ë“œê°€ ë°œìƒí•˜ê³ , íŠ¹íˆ **ë””ìŠ¤í¬ ì ‘ê·¼(í˜ì´ì§€ ìŠ¤ì™‘)**ì´ ì¦ì•„ì§€ë©´ ì‹œìŠ¤í…œ ì„±ëŠ¥ì´ í¬ê²Œ ì €í•˜ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë””ìŠ¤í¬ I/OëŠ” ë©”ëª¨ë¦¬ ì ‘ê·¼ë³´ë‹¤ ìˆ˜ë°±ë°° ì´ìƒ ëŠë¦¬ê¸° ë•Œë¬¸ì—, í˜ì´ì§€ í´íŠ¸ê°€ ë¹ˆë²ˆí•˜ë©´ ì‘ë‹µ ì†ë„ê°€ ë–¨ì–´ì§€ê³  ì• í”Œë¦¬ì¼€ì´ì…˜ ìˆ˜í–‰ì´ ì§€ì—°ë©ë‹ˆë‹¤. (ì˜ˆ: ì‹¬í•œ ê²½ìš° CPUê°€ ìœ íœ´ ëŒ€ê¸°í•˜ê²Œ ë˜ëŠ” ìŠ¤ë˜ì‹± í˜„ìƒ ë°œìƒ ê°€ëŠ¥ - 6ì¥ì—ì„œ ì„¤ëª…).

**ë³µì¡ì„± ì¦ê°€**: ê°€ìƒ ë©”ëª¨ë¦¬ êµ¬í˜„ìœ¼ë¡œ ìš´ì˜ì²´ì œì™€ í•˜ë“œì›¨ì–´ì˜ êµ¬ì¡°ê°€ ë³µì¡í•´ì§‘ë‹ˆë‹¤. ìš´ì˜ì²´ì œëŠ” í˜ì´ì§€ í…Œì´ë¸”, ìŠ¤ì™‘ ê³µê°„ ê´€ë¦¬, í˜ì´ì§€ êµì²´ ì•Œê³ ë¦¬ì¦˜ ë“± ì¶”ê°€ ì‘ì—…ì„ ìˆ˜í–‰í•´ì•¼ í•˜ë©°, MMU/TLB ë“±ì˜ í•˜ë“œì›¨ì–´ ì§€ì›ì´ ìš”êµ¬ë©ë‹ˆë‹¤. ì´ëŠ” ì‹œìŠ¤í…œ êµ¬í˜„ ë¹„ìš©ì„ ë†’ì´ê³ , ë©”ëª¨ë¦¬ ê´€ë¦¬ì— ì¶”ê°€ì ì¸ ë©”ëª¨ë¦¬ ê³µê°„(í˜ì´ì§€ í…Œì´ë¸” ë“±)ë„ ì†Œëª¨í•©ë‹ˆë‹¤.

**ë°ì´í„° ì¼ê´€ì„± ë° ì˜¤ë¥˜ ìœ„í—˜**: ë©”ëª¨ë¦¬ë¥¼ ë””ìŠ¤í¬ì™€ ì˜¤ê°€ë©° ì‚¬ìš©í•˜ë¯€ë¡œ, ì „ì› ì¥ì• ë‚˜ ì‹œìŠ¤í…œ ì˜¤ë¥˜ ì‹œ ìŠ¤ì™‘ ì¤‘ì´ë˜ ë°ì´í„°ì˜ ì†ì‹¤ ìœ„í—˜ì´ ìˆìŠµë‹ˆë‹¤. ë˜í•œ ê°œë°œ ì‹œ ê°€ìƒ ë©”ëª¨ë¦¬ ë™ì‘ì„ ì˜ ì´í•´í•˜ì§€ ëª»í•˜ë©´ ì˜ˆìƒì¹˜ ëª»í•œ ì„±ëŠ¥ ë¬¸ì œë¥¼ ì´ˆë˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´, ì‹¤ì‹œê°„ ì„±ëŠ¥ì´ ì¤‘ìš”í•œ ì‹œìŠ¤í…œì—ì„œëŠ” ì˜ˆì¸¡ ë¶ˆê°€ëŠ¥í•œ í˜ì´ì§€ í´íŠ¸ ì§€ì—°ì´ ë¬¸ì œê°€ ë  ìˆ˜ ìˆìŠµë‹ˆë‹¤.


1. **CPUê°€ í˜ì´ì§€ ì ‘ê·¼ ì‹œë„**
   í”„ë¡œì„¸ìŠ¤ê°€ íŠ¹ì • ê°€ìƒ ì£¼ì†Œì˜ ë°ì´í„°ë¥¼ ìš”ì²­í•©ë‹ˆë‹¤.

2. **í˜ì´ì§€ í…Œì´ë¸” ì¡°íšŒ**
   MMUê°€ í•´ë‹¹ ì£¼ì†Œì˜ ìœ íš¨ ë¹„íŠ¸(valid bit)ì„ í™•ì¸í•©ë‹ˆë‹¤.
 
 
3. **ìœ íš¨í•˜ì§€ ì•ŠìŒ(0) -> í˜ì´ì§€ í´íŠ¸ ë°œìƒ** 
   CPUëŠ” í˜ì´ì§€ í´íŠ¸ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¤ê³  ì»¤ë„(ìš´ì˜ì²´ì œ)ì— ì œì–´ë¥¼ ë„˜ê¹ë‹ˆë‹¤.

4. **ì»¤ë„ì—ì„œ ì²˜ë¦¬**
   ë””ìŠ¤í¬(ìŠ¤ì™‘ ì˜ì—­)ì—ì„œ í•´ë‹¹ í˜ì´ì§€ë¥¼ ì°¾ì•„ ë©”ëª¨ë¦¬ì— ì ì¬í•©ë‹ˆë‹¤.

5. **í˜ì´ì§€ í…Œì´ë¸”ì„ ê°±ì‹ **
   í•´ë‹¹ ê°€ìƒ ì£¼ì†Œ <-> ë¬¼ë¦¬ ì£¼ì†Œ ë§¤í•‘ ì—…ë°ì´íŠ¸

6. **í”„ë¡œì„¸ìŠ¤ ì¬ì‹œì‘**
   í´íŠ¸ê°€ ë°œìƒí–ˆë˜ ëª…ë ¹ì–´ë¥¼ ë‹¤ì‹œ ì‹¤í–‰ -> ì´ë²ˆì—” ì •ìƒ ì ‘ê·¼ ê°€ëŠ¥

ì´ ì „ì²´ ê³¼ì •(í˜ì´ì§€ í´íŠ¸ ì„œë¹„ìŠ¤)ì— ìˆ˜ë°˜ë˜ëŠ” ì‹œê°„ì€ ë””ìŠ¤í¬ I/O ë•Œë¬¸ì— ë©”ëª¨ë¦¬ ì ‘ê·¼ì— ë¹„í•´ ë§¤ìš° í¬ë©°, ê°€ëŠ¥í•œ í•œ í˜ì´ì§€ í´íŠ¸ë¥¼ ì¤„ì´ëŠ” ê²ƒì´ ì‹œìŠ¤í…œ ì„±ëŠ¥ì— ì¤‘ìš”í•©ë‹ˆë‹¤.

### 6. ìŠ¤ë˜ì‹± ë° í˜ì´ì§€ í´íŠ¸

ê°€ìƒ ë©”ëª¨ë¦¬ í™˜ê²½ì—ì„œ **í˜ì´ì§€ í´íŠ¸(page fault)**ì™€ **ìŠ¤ë˜ì‹±(thrashing)**ì€ ë©”ëª¨ë¦¬ ê´€ë¦¬ì™€ ì„±ëŠ¥ ì¸¡ë©´ì—ì„œ ì¤‘ìš”í•œ ê°œë…ì…ë‹ˆë‹¤.

ë¨¼ì €, í˜ì´ì§€ í´íŠ¸ë€ í”„ë¡œì„¸ìŠ¤ê°€ í•„ìš”í•œ í˜ì´ì§€ê°€ í˜„ì¬ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ì— ì¡´ì¬í•˜ì§€ ì•Šì„ ë•Œ ë°œìƒí•˜ëŠ” ì´ë²¤íŠ¸ì…ë‹ˆë‹¤. ì˜ˆë¥¼ ë“¤ì–´ ì–´ë–¤ ëª…ë ¹ì´ ì£¼ì†Œ Xë¥¼ ì½ìœ¼ë ¤ê³  í–ˆëŠ”ë° í•´ë‹¹ ê°€ìƒ í˜ì´ì§€ê°€ RAMì— ì—†ìœ¼ë©´ CPU í•˜ë“œì›¨ì–´ê°€ íŠ¸ë©(trap)ì„ ë°œìƒì‹œì¼œ ìš´ì˜ì²´ì œì— í˜ì´ì§€ í´íŠ¸ ì˜ˆì™¸ë¥¼ ì•Œë¦½ë‹ˆë‹¤. í˜ì´ì§€ í´íŠ¸ê°€ ë°œìƒí•˜ëŠ” ì¦‰ì‹œ CPUëŠ” ì‹¤í–‰ì„ ì¤‘ë‹¨í•˜ê³  OS ì»¤ë„ì´ ê°œì…í•˜ì—¬ ì•„ë˜ì™€ ê°™ì€ ê³¼ì •ì„ ìˆ˜í–‰í•©ë‹ˆë‹¤.


**ìŠ¤ë˜ì‹±(thrashing)**ì€ í˜ì´ì§€ í´íŠ¸ê°€ ì§€ë‚˜ì¹˜ê²Œ ë¹ˆë²ˆí•˜ê²Œ ë°œìƒí•˜ì—¬ CPUê°€ ìœ ìš©í•œ ê³„ì‚°ì„ í•˜ê¸°ë³´ë‹¤ ëŒ€ë¶€ë¶„ì˜ ì‹œê°„ì„ í˜ì´ì§€ êµì²´ ì‘ì—…ì— ì†Œë¹„í•˜ëŠ” ìƒíƒœë¥¼ ë§í•©ë‹ˆë‹¤. ì‰½ê²Œ ë§í•´, í”„ë¡œì„¸ìŠ¤ë“¤ì´ ê³„ì†í•´ì„œ í•„ìš”í•œ í˜ì´ì§€ë“¤ì´ ë©”ëª¨ë¦¬ì— ì—†ì–´ì„œ **í˜ì´ì§€ í´íŠ¸ -> í˜ì´ì§€ ì ì¬/êµì²´ -> ê³§ ë‹¤ë¥¸ í˜ì´ì§€ í´íŠ¸... ê°€ ì—°ì‡„ì ìœ¼ë¡œ ì¼ì–´ë‚˜ ë””ìŠ¤í¬ ìŠ¤ì™‘ ì…ì¶œë ¥ì´ ê³¼ë„í•˜ê²Œ ë°œìƒí•˜ê³ , ê·¸ ê²°ê³¼ ì „ì²´ ì‹œìŠ¤í…œ ì„±ëŠ¥ì´ ê¸‰ê²©íˆ ì•…í™”ë˜ëŠ” í˜„ìƒì…ë‹ˆë‹¤.**

![BitOperations](https://velog.velcdn.com/images/jjuny7712/post/a306671f-ecf7-46dd-95e2-3a4513807adc/image.png)

ê·¸ë¦¼4 Degree of Multiprogrammingê³¼ CPU Usageê°„ì˜ ëª¨ë¸ë§

ìœ„ ëª¨ë¸ë§ì€ ì´ˆë°˜ì—ëŠ” í”„ë¡œì„¸ìŠ¤ ìˆ˜(ë‹¤ì¤‘ í”„ë¡œê·¸ë˜ë°)ê°€ ëŠ˜ì–´ë‚ ìˆ˜ë¡ CPUëŠ” ë” ë°”ë¹ ì ¸ì„œ í™œìš©ë¥ ì´ ì¦ê°€í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ, ì¼ì • ì„ê³„ì ì„ ë„˜ì–´ì„œê²Œ ë˜ë©´ í˜ì´ì§€ í´íŠ¸ê°€ ê¸‰ì¦í•˜ê²Œë˜ê³  CPU í™œìš©ë¥ ì´ ê¸‰ê°í•˜ê²Œ ë©ë‹ˆë‹¤. ì´ ê¸‰ë½ ì§€ì ì„ ì“°ë ˆì‹±(trashing)ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

### 6.1 CPUì™€ I/Oì˜ ë™ì‹œì„± ëª¨ë¸ë¡œ í•´ì„
í° í‹€ì—ì„œ ìš´ì˜ì²´ì œì˜ ê¸°ë³¸ ìì›ì€ ë‹¤ìŒ ë‘ ê°€ì§€ë¡œ ë³¼ ìˆ˜ ìˆìŠµë‹ˆë‹¤.
- CPU (ì—°ì‚° ìì›)
- I/O ì¥ì¹˜ (ë””ìŠ¤í¬ ë“±)
ì •ìƒì ì¸ ìƒíƒœì—ì„œëŠ” ë‹¤ìŒê³¼ ê°™ì€ ë³‘ë ¬ì„±ì´ ìˆìŠµë‹ˆë‹¤.


|í”„ë¡œì„¸ìŠ¤ Aê°€ CPUë¥¼ ì‚¬ìš© ì¤‘ | í”„ë¡œì„¸ìŠ¤ BëŠ” ë””ìŠ¤í¬ I/O ì¤‘ |
|----------|---------|
|CPUì™€ ë””ìŠ¤í¬ ëª¨ë‘ ë°”ì˜ê²Œ ì¼í•¨ | ë†’ì€ ì‹œìŠ¤í…œ í™œìš©ë¥  ìœ ì§€ |

ì´ ê²½ìš° CPU Utilizationì€ ë†’ìŠµë‹ˆë‹¤.

í•˜ì§€ë§Œ, ì“°ë ˆì‹± ë°œìƒì‹œ ì´ íë¦„ì€ ë¶•ê´´ë©ë‹ˆë‹¤.

1. í”„ë¡œì„¸ìŠ¤ê°€ í˜ì´ì§€ë¥¼ ì°¸ì¡°
2. í•´ë‹¹ í˜ì´ì§€ê°€ ë©”ëª¨ë¦¬ì— ì—†ìŒ -> Page Fault ë°œìƒ(Trap)
3. CPUëŠ” ì¦‰ì‹œ ëŒ€ê¸° ìƒíƒœ(Blocked)ë¡œ ì „í™˜(CPUëŠ” ë” ì´ìƒ ì´   í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ì§€ ì•ŠìŒ) 
4. ë””ìŠ¤í¬ I/O ìš”ì²­ ë°œìƒ (Swap-in/out)
5. ë””ìŠ¤í¬ëŠ” ë§¤ìš° ëŠë¦¼ (ìˆ˜ms ë‹¨ìœ„)
   -> CPUëŠ” ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë¥¼ ì‹¤í–‰í•˜ë ¤ í•˜ì§€ë§Œ, ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ë„ ë˜‘ê°™ì´ í˜ì´ì§€ í´íŠ¸ ë°œìƒ
6. ê²°êµ­ ëŒ€ë¶€ë¶„ì˜ í”„ë¡œì„¸ìŠ¤ê°€ I/O ìƒíƒœê°€ ë˜ì–´ CPUëŠ” ë†€ê²Œë¨ (Idle)
> í•µì‹¬: CPUê°€ ì‰¬ëŠ” ì´ìœ ëŠ” ì¼í•  ì½”ë“œë‚˜ ë°ì´í„°ê°€ ë©”ëª¨ë¦¬ì— ì—†ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ë””ìŠ¤í¬ëŠ” ë³‘ëª©(bottleneck)ì´ ë˜ì–´, CPUëŠ” ê±°ì˜ ëª¨ë“  ì‹œê°„ ë™ì•ˆ I/O ëŒ€ê¸° ìƒíƒœì— ë¹ ì§‘ë‹ˆë‹¤.

ëª¨ë¸ë§ ê´€ì ìœ¼ë¡œ ë³¸ë‹¤ë©´, íì‰ ì‹œìŠ¤í…œìœ¼ë¡œ ë¶„ì„í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
ìš´ì˜ì²´ì œ ì„±ëŠ¥ì„ M/M/1 Queueë¡œ ë‹¨ìˆœ ëª¨ë¸ë§í•˜ë©´

- Î»: ìš”ì²­ ë„ì°©ë¥ 

- Î¼: ì²˜ë¦¬ìœ¨

- Ï = Î»/Î¼ : ìì› ì´ìš©ë¥ 

CPU ì…ì¥ì—ì„œ, í˜ì´ì§€ í´íŠ¸ìœ¨ì´ ê¸‰ì¦í•˜ë©´ í”„ë¡œì„¸ìŠ¤ê°€ CPU Queue -> I/O Queueë¡œ ì´ë™í•˜ëŠ” ë¹„ìœ¨ì´ ì¦ê°€í•©ë‹ˆë‹¤.
ì¦‰,

- CPUì— ë¨¸ë¬´ëŠ” í‰ê·  ì‹œê°„ â†“

- I/O ëŒ€ê¸° ì‹œê°„ â†‘

- ì „ì²´ Throughput â†“

- ë”°ë¼ì„œ CPU Utilization â†“

ì´ë¥¼ ìˆ˜ì‹ìœ¼ë¡œ í‘œí˜„í•˜ë©´ ëŒ€ëµì ìœ¼ë¡œ ë‹¤ìŒê³¼ ê°™ìŠµë‹ˆë‹¤.
```latex
UCPU â€‹= 1âˆ’P(CPUÂ Idle)
```
ì“°ë ˆì‹±ì´ ì‹¬í• ìˆ˜ë¡ P(CPU Idle)ì´ ì¦ê°€í•˜ê¸° ë•Œë¬¸ì— -> UcpuëŠ” ê¸‰ê²©íˆ ê°ì†Œí•©ë‹ˆë‹¤.

### 6.3 ì•…ìˆœí™˜ êµ¬ì¡° (í”¼ë“œë°± ë£¨í”„)
ì“°ë ˆì‹±ì€ ìê¸° ê°•í™”ì (positive feedback) í˜„ìƒì…ë‹ˆë‹¤.
```
CPU Utilization â†“
-> OSê°€ "CPUê°€ ë†€ê³  ìˆë„¤? -> í”„ë¡œì„¸ìŠ¤ ë” íˆ¬ì…"
-> ë©”ëª¨ë¦¬ ë¶€ì¡± ì‹¬í™”
-> í˜ì´ì§€ í´íŠ¸ ì¦ê°€
-> ë””ìŠ¤í¬ I/O í­ì¦
-> CPU ë” ë†€ê²Œ ë¨
-> ì•…ìˆœí™˜
```

ê²°ê³¼ì ìœ¼ë¡œ CPUê°€ ë°”ì˜ê²Œ ì¼í•˜ëŠ”ê²Œ ì•„ë‹ˆë¼, ë””ìŠ¤í¬ê°€ ì‰¬ì§€ ì•Šê³  ì¼í•˜ì§€ë§Œ ì‹œìŠ¤í…œ ì „ì²´ëŠ” ëŠë ¤ì§€ëŠ” í˜„ìƒì…ë‹ˆë‹¤. ì´ë¥¼ ë°©ì§€í•˜ê¸° ìœ„í•œ ë‘ ê°€ì§€ ì•Œê³ ë¦¬ì¦˜ì´ ìˆìŠµë‹ˆë‹¤.

(1) working Set Model
ê°œë…
- ê° í”„ë¡œì„¸ìŠ¤ëŠ” ì¼ì • ì‹œê°„ Î”(ë¸íƒ€) ë™ì•ˆ ìì£¼ ì°¸ì¡°í•˜ëŠ” í˜ì´ì§€ì˜ ì§‘í•©ì„ ê°€ì§‘ë‹ˆë‹¤. ì´ ì§‘í•©ì„ WSSi (Working Set Size process i) ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤. 
- ì´ ì§‘í•©ì— ë©”ëª¨ë¦¬ì— ì™„ì „íˆ ì˜¬ë¼ì™€ ìˆì–´ì•¼ë§Œ í˜ì´ì§€ í´íŠ¸ìœ¨ì´ ë‚®ê²Œ ìœ ì§€ë©ë‹ˆë‹¤.

ê³µì‹
$WSS_i(t) = {{pages referenced by process } \{ in } [t-\Delta,\, t] \;\}$
- D: ì „ì²´ ì‹œìŠ¤í…œì´ ìš”êµ¬í•˜ëŠ” í”„ë ˆì„ ìˆ˜
- M: ì‹¤ì œ ë¬¼ë¦¬ì  í”„ë ˆì„ ìˆ˜

ë§Œì•½ D > m -> ì‹œìŠ¤í…œ ë©”ëª¨ë¦¬ê°€ ë¶€ì¡± -> Trashing ë°œìƒ ê°€ëŠ¥ì„± ë†’ìŒ

[ë™ì‘ ë°©ì‹]
    1. OSëŠ” ê° í”„ë¡œì„¸ìŠ¤ì˜ ìµœê·¼ ì°¸ì¡° ì´ë ¥ì„ ì¶”ì í•©ë‹ˆë‹¤.
    2. ì¼ì • ì£¼ê¸°ë§ˆë‹¤ WSSë¥¼ ê³„ì‚°í•©ë‹ˆë‹¤.
    3. ì „ì²´ ìš”êµ¬ Dê°€ ì‹¤ì œ í”„ë ˆì„ ìˆ˜ë³´ë‹¤ í¬ë©´, ì¼ë¶€ í”„ë¡œì„¸ìŠ¤ë¥¼ Suspend ì‹œì¼œ ë©”ëª¨ë¦¬ ë¶€ë‹´ì„ ì¤„ì…ë‹ˆë‹¤.

[ê´€ì¸¡ ì§€í‘œ]
- í˜ì´ì§€ ë¶€ì¬ìœ¨(Page Fault Rate)ì´ ê¸‰ì¦í•˜ê¸° ì§ì „ êµ¬ê°„ì¸ Î” ê²°ì •ì— ì¤‘ìš”í•œ ê¸°ì¤€
- Î”ê°€ ë„ˆë¬´ í¬ë©´ ë¶ˆí•„ìš”í•˜ê²Œ ë§ì€ í˜ì´ì§€ë¥¼ í¬í•¨ -> ë¹„íš¨ìœ¨ì 
- Î”ê°€ ë„ˆë¬´ ì‘ìœ¼ë©´ ì§€ì—­ì„±ì´ ë¬´ì‹œë˜ì–´ ìì£¼ êµì²´ ë°œìƒ

(2)Page-Fault Frequency (PFF) Algorithm
[ê°œë…]
- í˜ì´ì§€ í´íŠ¸ìœ¨(Page Fault Rate, PFR)ì„ ì§ì ‘ ëª¨ë‹ˆí„°ë§í•˜ì—¬ í”„ë¡œì„¸ìŠ¤ë³„ë¡œ í”„ë ˆì„ ìˆ˜ë¥¼ ë™ì ìœ¼ë¡œ ì¡°ì •í•˜ëŠ” ë°©ë²•

[ë™ì‘ë°©ì‹]
    1. ê° í”„ë¡œì„¸ìŠ¤ì— ëŒ€í•´ ìµœê·¼ í˜ì´ì§€ í´íŠ¸ ê°„ ì‹œê°„ ê°„ê²©ì„ ì¸¡ì •í•©ë‹ˆë‹¤.
    2. í´íŠ¸ìœ¨ì´ ë„ˆë¬´ ë†’ìœ¼ë©´ -> í”„ë ˆì„ì„ ë” í• ë‹¹
    3. í´íŠ¸ìœ¨ì´ ë„ˆë¬´ ë‚®ìœ¼ë©´ -> ì¼ë¶€ í”„ë ˆì„ì„ íšŒìˆ˜(ë‹¤ë¥¸ í”„ë¡œì„¸ìŠ¤ì— ì¬ë¶„ë°°)
    4. ì‹œìŠ¤í…œ ì „ì²´ì ìœ¼ë¡œ í˜ì´ì§€ í´íŠ¸ìœ¨ì´ ì•ˆì •ë  ë•Œê¹Œì§€ ì¡°ì • ë°˜ë³µ.

[ê¸°ì¤€ê°’ ì„¤ì •]
- ë‘ ê°œì˜ ì„ê³„ê°’ì„ ë‘ 
  - $$PFR_low$$ : ë„ˆë¬´ ë‚®ì€ ê²½ìš° -> í”„ë ˆì„ íšŒìˆ˜ ê°€ëŠ¥
  - $$PFR_high$$ : ë„ˆë¬´ ë†’ì€ ê²½ìš° -> í”„ë ˆì„ ì¶”ê°€ í•„ìš”

[ëª¨ë¸ì‹]
$$
\mathrm{PFR}_i =
\frac{\text{Page Faults in interval } \Delta}{
\text{Instructions executed in } \Delta}    

-> PFR_i > PFR_high => Allocate More Frames
-> PFR_i < PFR_low => Deallocate Some Frames
$$  

[ê´€ì¸¡ ì§€í‘œ]
- ê° í”„ë¡œì„¸ìŠ¤ì˜ í˜ì´ì§€ í´íŠ¸ íšŸìˆ˜ë¥¼ ì‹œê°„ ë‹¨ìœ„ë¡œ ì¸¡ì •í•˜ë©´ ì£¼ê¸°ì  ì§„ë™ íŒ¨í„´ì´ ê´€ì¸¡ë¨
- ì•ˆì • êµ¬ê°„ì—ì„œëŠ” PFRì´ ê±°ì˜ ì¼ì •í•˜ê²Œ ìœ ì§€ë©ë‹ˆë‹¤.

(3) Load Control (System-Level Control)
[ê°œë…]
- ì‹œìŠ¤í…œ ì „ì²´ì˜ ë‹¤ì¤‘ í”„ë¡œê·¸ë˜ë° ì •ë„ (Degree of Multiprogramming)ë¥¼ ì¡°ì ˆí•©ë‹ˆë‹¤.
- CPU í™œìš©ë¥ , í˜ì´ì§€ í´íŠ¸ìœ¨, I/O ëŒ€ê¸°ìœ¨ì„ ì‹¤ì‹œê°„ ê´€ì¸¡í•˜ë©° í”„ë¡œì„¸ìŠ¤ ìˆ˜ë¥¼ ë™ì ìœ¼ë¡œ ê´€ë¦¬.

[ë™ì‘ ë°©ì‹]
    1. CPU Utilizationì´ ë–¨ì–´ì§€ê³ , í˜ì´ì§€ í´íŠ¸ìœ¨ì´ ê¸‰ì¦í•˜ë©´ -> ì“°ë ˆì‹± êµ¬ê°„ ì§„ì… ê°ì§€.
    2. ì¼ë¶€ í”„ë¡œì„¸ìŠ¤ë¥¼ Swap Outí•˜ì—¬ ë¬¼ë¦¬ í”„ë ˆì„ í™•ë³´.
    3. ë‚¨ì€ í”„ë¡œì„¸ìŠ¤ê°€ ì•ˆì •ë˜ë©´ -> ìˆœì°¨ì ìœ¼ë¡œ Swap in



[ì½”ë“œ]

```C
/* thrashsim.c
   Educational VM thrashing simulator (Working Set / PFF / Load Control)
   - Per-process locality-based reference generator
   - Per-process page table with LRU replacement
   - Working Set window Î” (ring buffer) to estimate WSS_i(t)
   - PFF control: adjusts frames based on page-fault rate thresholds
   - Load Control: suspends/resumes processes based on pressure
   (c) for learning purposes. No external deps.
*/
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>
#include <stdbool.h>
#include <math.h>

#define MAX_PROCS  64
#define MAX_PAGES  4096   // virtual pages universe per process (educational)
#define MAX_FRAMES 8192   // total physical frames bound

typedef enum { MODE_WS, MODE_PFF, MODE_LOAD } Mode;

typedef struct {
    int pid;
    bool active;         // for load control
    int frames_alloc;    // current frames allocated
    int resident_count;  // current resident pages
    int *resident;       // -1 empty, or page id
    unsigned *last_use;  // LRU timestamp per slot
    unsigned faults;     // total page faults
    unsigned refs;       // total references
    // locality parameters
    int center;          // working set center page id
    int span;            // locality span (size of hot set)
    // working set window (Î”)
    int delta;
    int *window;         // ring buffer of last Î” refs (page ids)
    int wpos;
    int *inwin_count;    // count occurrences of page in window
    int wss;             // |WSS_i|
    // recent PFs for PFF
    unsigned pf_in_interval;
    unsigned instr_in_interval;
} Proc;

typedef struct {
    Mode mode;
    int nprocs;
    int total_frames; // system m
    int ticks;        // total time steps
    int delta;        // default Î”
    double pfr_low, pfr_high; // PFF thresholds
    // load control
    double sys_pfr_high; // system-level trigger
} Config;

typedef struct {
    Config cfg;
    Proc procs[MAX_PROCS];
    unsigned now;
    int free_frames;
} Sys;

static unsigned urand() { return (unsigned)rand(); }

static int clampi(int v, int lo, int hi) {
    if (v < lo) return lo; if (v > hi) return hi; return v;
}

// Pick a page according to locality (uniform in [center-span/2, center+span/2])
static int next_reference(Proc *p) {
    int half = p->span / 2;
    int base = clampi(p->center - half, 0, MAX_PAGES - 1);
    int offset = (int)(urand() % (unsigned)(p->span+1));
    int page = base + offset;
    if (page >= MAX_PAGES) page = MAX_PAGES - 1;
    // slowly drift center to simulate phase changes
    if ((urand() % 1000) == 0) {
        int drift = ((int)urand() % 41) - 20;
        p->center = clampi(p->center + drift, 0, MAX_PAGES-1);
    }
    return page;
}

static void init_proc(Proc *p, int pid, int frames_alloc, int delta, int hot_span) {
    memset(p, 0, sizeof(*p));
    p->pid = pid;
    p->active = true;
    p->frames_alloc = frames_alloc;
    p->resident = (int*)malloc(sizeof(int)*frames_alloc);
    p->last_use = (unsigned*)malloc(sizeof(unsigned)*frames_alloc);
    for (int i=0;i<frames_alloc;i++){ p->resident[i] = -1; p->last_use[i]=0; }
    p->resident_count = 0;
    p->center = (urand() % MAX_PAGES);
    p->span   = clampi(hot_span, 8, MAX_PAGES);
    p->delta = delta;
    p->window = (int*)malloc(sizeof(int)*delta);
    p->inwin_count = (int*)calloc(MAX_PAGES, sizeof(int));
    for (int i=0;i<delta;i++) p->window[i] = -1;
    p->wpos = 0;
    p->wss = 0;
}

// Reallocate frames array when frames_alloc changes
static void resize_frames(Proc *p, int new_frames) {
    if (new_frames < 1) new_frames = 1;
    int *new_res = (int*)malloc(sizeof(int)*new_frames);
    unsigned *new_last = (unsigned*)malloc(sizeof(unsigned)*new_frames);
    // keep as many recent pages as possible (copy best LRU)
    // simple strategy: copy first min
    int copy = (p->resident_count < new_frames) ? p->resident_count : new_frames;
    for (int i=0;i<new_frames;i++){ new_res[i]=-1; new_last[i]=0; }
    // pick copy most recent by last_use
    for (int c=0;c<copy;c++){
        int best=-1; unsigned bestts=0;
        for (int i=0;i<p->frames_alloc;i++){
            if (p->resident[i] != -1 && p->last_use[i]>=bestts){
                bestts = p->last_use[i]; best = i;
            }
        }
        if (best>=0){
            new_res[c] = p->resident[best];
            new_last[c] = p->last_use[best];
            p->resident[best] = -1; // mark taken
        }
    }
    free(p->resident); free(p->last_use);
    p->resident = new_res; p->last_use = new_last;
    p->frames_alloc = new_frames;
    // recount
    int rc=0; for (int i=0;i<new_frames;i++) if (p->resident[i]!=-1) rc++;
    p->resident_count = rc;
}

// Update working set ring and |WSS|
static void ws_push(Proc *p, int page){
    int out = p->window[p->wpos];
    if (out >= 0) {
        p->inwin_count[out]--;
        if (p->inwin_count[out]==0) p->wss--;
    }
    p->window[p->wpos] = page;
    p->wpos = (p->wpos+1)%p->delta;
    if (p->inwin_count[page]==0) p->wss++;
    p->inwin_count[page]++;
}

// find hit slot or -1
static int find_resident_slot(Proc *p, int page) {
    for (int i=0;i<p->frames_alloc;i++){
        if (p->resident[i] == page) return i;
    }
    return -1;
}

// choose victim slot (LRU)
static int choose_victim(Proc *p) {
    int victim=-1; unsigned best=~0u;
    for (int i=0;i<p->frames_alloc;i++){
        if (p->resident[i]==-1) return i; // free
    }
    for (int i=0;i<p->frames_alloc;i++){
        if (p->last_use[i] < best) { best = p->last_use[i]; victim = i; }
    }
    return victim;
}

static void ref_page(Sys *sys, Proc *p, int page){
    if (!p->active) return;
    p->refs++;
    p->instr_in_interval++;
    ws_push(p, page);
    int slot = find_resident_slot(p, page);
    if (slot >= 0) {
        p->last_use[slot] = sys->now;
        return;
    }
    // fault
    p->faults++; p->pf_in_interval++;
    int vic = choose_victim(p);
    if (p->resident[vic]==-1) { p->resident_count++; }
    p->resident[vic] = page;
    p->last_use[vic] = sys->now;
}

// sum of WSS
static int sum_WSS(Sys *sys){
    int D=0;
    for (int i=0;i<sys->cfg.nprocs;i++){
        Proc *p = &sys->procs[i];
        if (!p->active) continue;
        D += p->wss;
    }
    return D;
}

// sum of frames allocated to active procs
static int sum_frames(Sys *sys){
    int s=0;
    for (int i=0;i<sys->cfg.nprocs;i++){
        Proc *p = &sys->procs[i];
        if (!p->active) continue;
        s += p->frames_alloc;
    }
    return s;
}

static void ws_control(Sys *sys){
    // Working Set based load control:
    // If D > m, suspend processes (largest WSS first) until sum â‰¤ m.
    int D = sum_WSS(sys);
    if (D <= sys->cfg.total_frames) return;
    // build list
    int idx[MAX_PROCS], n=0;
    for (int i=0;i<sys->cfg.nprocs;i++) if (sys->procs[i].active) idx[n++]=i;
    // sort by wss desc
    for (int a=0;a<n;a++) for (int b=a+1;b<n;b++){
        if (sys->procs[idx[a]].wss < sys->procs[idx[b]].wss){
            int t=idx[a]; idx[a]=idx[b]; idx[b]=t;
        }
    }
    for (int k=0;k<n && D > sys->cfg.total_frames; k++){
        Proc *p = &sys->procs[idx[k]];
        p->active = false;
        D -= p->wss;
    }
}

static void pff_control(Sys *sys){
    // For each active process: if PFR > high â†’ give frame; if < low â†’ take one.
    // Keep global frames bound.
    int total = sys->cfg.total_frames;
    int used = sum_frames(sys);
    for (int i=0;i<sys->cfg.nprocs;i++){
        Proc *p = &sys->procs[i];
        if (!p->active) continue;
        double pfr = (p->instr_in_interval==0)?0.0:
                     (double)p->pf_in_interval / (double)p->instr_in_interval;
        if (pfr > sys->cfg.pfr_high && used < total){
            resize_frames(p, p->frames_alloc + 1);
            used++;
        } else if (pfr < sys->cfg.pfr_low && p->frames_alloc > 1){
            resize_frames(p, p->frames_alloc - 1);
            used--;
        }
        p->pf_in_interval = 0;
        p->instr_in_interval = 0;
    }
}

static void load_control(Sys *sys){
    // If system PFR too high (pressure), suspend lowest-efficiency procs
    // Efficiency proxy: frames_alloc / wss  (smaller is worse)
    // Or use recent PFR as penalty.
    double pf_sum=0.0, instr_sum=0.0;
    for (int i=0;i<sys->cfg.nprocs;i++){
        Proc *p=&sys->procs[i];
        pf_sum += p->pf_in_interval;
        instr_sum += p->instr_in_interval;
    }
    double sys_pfr = (instr_sum==0)?0.0: pf_sum / instr_sum;
    if (sys_pfr < sys->cfg.sys_pfr_high) {
        // maybe try to resume one suspended process if room (D â‰¤ m)
        int D = sum_WSS(sys);
        if (D <= sys->cfg.total_frames) {
            for (int i=0;i<sys->cfg.nprocs;i++){
                Proc *p=&sys->procs[i];
                if (!p->active){
                    p->active = true;
                    break;
                }
            }
        }
    } else {
        // suspend one worst-off process
        int worst = -1; double worstScore = -1.0;
        for (int i=0;i<sys->cfg.nprocs;i++){
            Proc *p=&sys->procs[i];
            if (!p->active) continue;
            double eff = (p->wss==0)?1.0 : (double)p->frames_alloc / (double)p->wss;
            double pfr = (p->instr_in_interval==0)?0.0:
                         (double)p->pf_in_interval / (double)p->instr_in_interval;
            double score = pfr + (1.0 - eff); // higher worse
            if (score > worstScore){ worstScore = score; worst = i; }
        }
        if (worst>=0) sys->procs[worst].active = false;
    }
    // reset window counters for next control epoch
    for (int i=0;i<sys->cfg.nprocs;i++){
        sys->procs[i].pf_in_interval=0;
        sys->procs[i].instr_in_interval=0;
    }
}

static void parse_args(int argc, char **argv, Config *cfg){
    // defaults
    cfg->mode = MODE_WS;
    cfg->nprocs = 6;
    cfg->total_frames = 200;
    cfg->ticks = 50000;
    cfg->delta = 64;
    cfg->pfr_low = 0.05;
    cfg->pfr_high = 0.20;
    cfg->sys_pfr_high = 0.25;

    for (int i=1;i<argc;i++){
        if (!strncmp(argv[i], "--mode=", 7)){
            const char *m = argv[i]+7;
            if (!strcmp(m,"ws")) cfg->mode=MODE_WS;
            else if (!strcmp(m,"pff")) cfg->mode=MODE_PFF;
            else if (!strcmp(m,"load")) cfg->mode=MODE_LOAD;
        } else if (!strncmp(argv[i],"--procs=",8)){
            cfg->nprocs = atoi(argv[i]+8);
        } else if (!strncmp(argv[i],"--frames=",9)){
            cfg->total_frames = atoi(argv[i]+9);
        } else if (!strncmp(argv[i],"--ticks=",8)){
            cfg->ticks = atoi(argv[i]+8);
        } else if (!strncmp(argv[i],"--delta=",8)){
            cfg->delta = atoi(argv[i]+8);
        } else if (!strncmp(argv[i],"--pfr-low=",10)){
            cfg->pfr_low = atof(argv[i]+10);
        } else if (!strncmp(argv[i],"--pfr-high=",11)){
            cfg->pfr_high = atof(argv[i]+11);
        } else if (!strncmp(argv[i],"--sys-pfr-high=",16)){
            cfg->sys_pfr_high = atof(argv[i]+16);
        }
    }
    if (cfg->nprocs > MAX_PROCS) cfg->nprocs = MAX_PROCS;
    if (cfg->total_frames > MAX_FRAMES) cfg->total_frames = MAX_FRAMES;
}

int main(int argc, char **argv){
    srand((unsigned)time(NULL));
    Sys sys; memset(&sys,0,sizeof(sys));
    parse_args(argc, argv, &sys.cfg);

    // initial equal share of frames
    int base_frames = sys.cfg.total_frames / sys.cfg.nprocs;
    if (base_frames < 2) base_frames = 2;

    // init procs with varying locality spans
    for (int i=0;i<sys.cfg.nprocs;i++){
        int span = 32 + (i*7)%200; // different hot-set sizes
        init_proc(&sys.procs[i], i, base_frames, sys.cfg.delta, span);
    }

    // main loop
    unsigned control_every = 1000; // control epoch (instructions)
    for (sys.now=1; sys.now<= (unsigned)sys.cfg.ticks; sys.now++){
        // reference from each active proc
        for (int i=0;i<sys.cfg.nprocs;i++){
            Proc *p=&sys.procs[i];
            if (!p->active) continue;
            int page = next_reference(p);
            ref_page(&sys, p, page);
        }

        // control at epoch
        if (sys.now % control_every == 0){
            if (sys.cfg.mode == MODE_WS){
                ws_control(&sys); // suspend if D > m
            } else if (sys.cfg.mode == MODE_PFF){
                pff_control(&sys); // per-proc frames ++/--
            } else if (sys.cfg.mode == MODE_LOAD){
                load_control(&sys); // suspend/resume by system PFR
            }
        }
    }

    // final stats
    unsigned long total_refs=0, total_faults=0;
    int active=0, suspended=0;
    int D = sum_WSS(&sys);
    int used = sum_frames(&sys);

    printf("== Simulation complete ==\n");
    printf("Mode: %s, procs=%d, frames(m)=%d, ticks=%d, Î”=%d\n",
        (sys.cfg.mode==MODE_WS?"WS":(sys.cfg.mode==MODE_PFF?"PFF":"LOAD")),
        sys.cfg.nprocs, sys.cfg.total_frames, sys.cfg.ticks, sys.cfg.delta);

    for (int i=0;i<sys.cfg.nprocs;i++){
        Proc *p=&sys.procs[i];
        double pfr = (p->refs==0)?0.0: (double)p->faults / (double)p->refs;
        printf("[P%02d] %s frames=%3d refs=%7u faults=%7u PFR=%.4f WSS=%4d span=%3d\n",
               p->pid, p->active?"ACTIVE ":"SUSPEND",
               p->frames_alloc, p->refs, p->faults, pfr, p->wss, p->span);
        total_refs += p->refs;
        total_faults += p->faults;
        if (p->active) active++; else suspended++;
    }
    double sys_pfr = (total_refs==0)?0.0: (double)total_faults / (double)total_refs;
    printf("Summary: ACTIVE=%d, SUSPENDED=%d, Î£WSS=D=%d, Î£frames=%d (m=%d), System PFR=%.4f\n",
           active, suspended, D, used, sys.cfg.total_frames, sys_pfr);

    // cleanup
    for (int i=0;i<sys.cfg.nprocs;i++){
        Proc *p=&sys.procs[i];
        free(p->resident); free(p->last_use); free(p->window); free(p->inwin_count);
    }
    return 0;
}
```

- Working Set(WS)ëª¨ë¸
  - ws_push()ê°€ $$\delta-ìœˆë„ìš°$$ë¡œ WSS_ië¥¼ ì¶”ì •
  - ws_control()ì´ $$ D = \sum WSS_i$$ê°€ mì„ ì´ˆê³¼í•˜ë©´ WSSê°€ í° í”„ë¡œì„¸ìŠ¤ë¶€í„° ì¤‘ë‹¨
- PFF(Page-Fault Frequency)
  - ê° í”„ë¡œì„¸ìŠ¤ë³„ pf_in_interval / instr_in_intervalë¡œ PFR_i ì¶”ì •
  - pff_control()ì´ PFR_high ì´ˆê³¼ ì‹œ í”„ë ˆì„ ì¶”ê°€, PFR_low ë¯¸ë§Œì´ë©´ í”„ë ˆì„ íšŒìˆ˜
  - í”„ë ˆì„ ì¦ê° ì‹œ resize_frames()ê°€ LRU í‚µí•˜ì—¬ ì¬ë°°ì—´
- Load Control (system-level)
  - load_control()ì´ ì‹œìŠ¤í…œ PFR(ëª¨ë“  í”„ë¡œì„¸ìŠ¤ í•©ê³„)ë¥¼ ë³´ê³ 
    ë†’ìœ¼ë©´ íš¨ìœ¨ ë‚®ì€ í”„ë¡œì„¸ìŠ¤ë¥¼ ì¼ì‹œ ì¤‘ë‹¨
  - ë‚®ìœ¼ë©´ ì¡°ê±´ë¶€ë¡œ ì¬ê°œ
 

[ì‹œë®¬ë ˆì´ì…˜ íŒ]
- í”„ë ˆì„ì´ ë¹ ë“¯í•˜ê³  Î”/Spanì„ í‚¤ìš°ë©´ ì“°ë ˆì‹± ê²½í–¥ì´ ì»¤ì§
- --pfr-low, --pfr-high, --sys-pfr-highë¥¼ ë°”ê¿” ë¯¼ê°ë„ë¥¼ í…ŒìŠ¤íŠ¸
- WS ëª¨ë“œì—ì„œ --deleteë¥¼ í‚¤ìš°ë©´ WSSê°€ ì»¤ì ¸ D>mê°€ ì‰½ê²Œ ë°œìƒ -> ì¤‘ë‹¨ ì •ì±…ì´ ìì£¼ íŠ¸ë¦¬ê±°ë¨.

| ì§€í‘œ | ì˜ë¯¸ | ê´€ì¸¡ ë°©ì‹ |
|-------|-------|------| 
| CPU Utilization | CPUê°€ ì‹¤ì œë¡œ ë°”ì˜ê²Œ ì¼í•˜ëŠ” ë¹„ìœ¨ | í”„ë¡œì„¸ì„œ ìŠ¤ì¼€ì¥´ëŸ¬ ë¡œê·¸|
| Page Fault Rate | ë‹¨ìœ„ ì‹œê°„ ë‹¹ í˜ì´ì§€ í´íŠ¸ ìˆ˜ | MMU ì¹´ìš´í„°|
| I/O Queue Length | ë””ìŠ¤í¬ ëŒ€ê¸°ì—´ ê¸¸ì´ | ì»¤ë„ I/O ìŠ¤ì¼€ì¥´ëŸ¬ í†µê³„ |
| Active Process Count | ë™ì‹œì— ì‹¤í–‰ì¤‘ì¸ í”„ë¡œì„¸ìŠ¤ ìˆ˜ | OS í”„ë¡œì„¸ìŠ¤ í…Œì´ë¸”|

[ì‹¤ì œ ë°ì´í„° ê´€ì¸¡ ì˜ˆì‹œ]
| ì§€í‘œ | ì •ìƒ êµ¬ê°„ | ì“°ë ˆì‹± êµ¬ê°„ | ë‹¨ìœ„ |
|------|--------|----------|------|
| vmstat si/so | ê±°ì˜ 0 | ìˆ˜ë°± ~ ìˆ˜ì²œ ì¦ê°€ | kb/s |
| sar -B(paging/pageout) | 100 ~ 200 | 10,000ì´ìƒ | í˜ì´ì§€/s|
| top CPU idle | 10~30% | 90% ì´ìƒ | % |
| iostat %util(ë””ìŠ¤í¬) | <40% | >90% | %|
| í˜ì´ì§€ í´íŠ¸ìœ¨(PFR) | 0.01 | 0.5 ~ 1.0 ì´ìƒ | fault/instr |
> ì¦‰, ë””ìŠ¤í¬ëŠ” ë°”ì˜ê³  CPUëŠ” í•œê°€í•œ ë¹„ì •ìƒì  ìƒíƒœê°€ ë°”ë¡œ ì“°ë ˆì‹±ì˜ ì „í˜•ì ì¸ ì‹œê·¸ë„ ì…ë‹ˆë‹¤.

ì‹œìŠ¤í…œ ì´ ìš”êµ¬ í”„ë ˆì„
$ D(t) = \sum_i WSS_i(t) $

ë©”ëª¨ë¦¬ ì´ˆê³¼ ì¡°ê±´(ì“°ë ˆì‹± ê°€ëŠ¥ì„±)
$ D(t) \;>\; m $

### Page-Fault Frequency (PFF)

PFF (Page Fault Frequency) ì•Œê³ ë¦¬ì¦˜

í”„ë¡œì„¸ìŠ¤ì˜ í˜ì´ì§€ í´íŠ¸ìœ¨(Page Fault Frequency) ì„ ì¼ì • ë²”ìœ„ ì•ˆì—ì„œ ìœ ì§€ì‹œì¼œ
ê³¼ë„í•œ í˜ì´ì§€ êµì²´(Thrashing)ë¥¼ ë°©ì§€í•˜ëŠ” ë°©ì‹

ë™ì‘ ì›ë¦¬
1. ê° í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ í˜ì´ì§€ í´íŠ¸ìœ¨ ğ‘ğ‘“_ğ‘Ÿğ‘ğ‘¡ğ‘’ì„ ì¸¡ì •
2. ë‘ ì„ê³„ê°’ ì„¤ì •
   - ìƒí•œê°’ ğ‘ˆ ë„ˆë¬´ ë†’ìœ¼ë©´ â†’ ë©”ëª¨ë¦¬ ë¶€ì¡±
   - í•˜í•œê°’ ğ¿ ë„ˆë¬´ ë‚®ìœ¼ë©´ â†’ ë©”ëª¨ë¦¬ ê³¼ë‹¤ í• ë‹¹
3. ì£¼ê¸°ì ìœ¼ë¡œ í´íŠ¸ìœ¨ ë¹„êµ
  - pf_rate > U â†’ í”„ë ˆì„ ì¶”ê°€ í• ë‹¹ (Expand)
  - pf_rate < L â†’ í”„ë ˆì„ íšŒìˆ˜ (Reduce)
  - L â‰¤ pf_rate â‰¤ U â†’ ìœ ì§€ (Steady)

$\[
pf_rate = \frac{\text{Number of Page Faults}}{\text{Elapsed Time or Instructions}}
\]
$

ì •ë¦¬í•˜ë©´, í˜ì´ì§€ í´íŠ¸ëŠ” ê°€ìƒ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œì˜ ì •ìƒì ì¸ ë™ì‘ ì¼ë¶€ì´ì§€ë§Œ ê³¼ë„í•œ í˜ì´ì§€ í´íŠ¸ ë°œìƒì€ ìŠ¤ë˜ì‹±ìœ¼ë¡œ ì´ì–´ì ¸ ì„±ëŠ¥ ë¬¸ì œë¥¼ ì¼ìœ¼í‚µë‹ˆë‹¤. 
ì“°ë ˆì‹±ì´ ë°œìƒí•˜ë©´ CPU Utilizationì´ ê¸‰ê²©íˆ ë–¨ì–´ì§€ëŠ” ì´ìœ ëŠ” í”„ë¡œì„¸ìŠ¤ë“¤ì´ ì§€ì†ì ìœ¼ë¡œ í˜ì´ì§€ í´íŠ¸ë¥¼ ì¼ìœ¼ì¼œ I/O ëŒ€ê¸° ìƒíƒœë¡œ ì „í™˜ë˜ë©°, CPUê°€ ì‹¤ì œ ëª…ë ¹ì–´ ì‹¤í–‰ë³´ë‹¤ I/O ëŒ€ê¸° ìƒíƒœ ì „í™˜ì— ë” ë§ì€ ì‹œê°„ì„ ì“°ê¸° ë•Œë¬¸ì…ë‹ˆë‹¤. ì¦‰, CPUëŠ” ë” ì´ìƒ ê³„ì‚°í•˜ì§€ ì•Šê³  ëŒ€ë¶€ë¶„ì˜ ì‹œê°„ì„ ë†€ê²Œ ë˜ì–´ í™œìš©ë¥ ì´ ê¸‰ê°í•©ë‹ˆë‹¤.ì ì ˆí•œ ë©”ëª¨ë¦¬ ê´€ë¦¬ ì „ëµ(ì„¤ëª…ëœ ì‘ì—… ì„¸íŠ¸ ê¸°ë°˜ì˜ ë¶€í•˜ ì œì–´ ë“±)ì„ í†µí•´ ìŠ¤ë˜ì‹±ì„ ë°©ì§€í•˜ëŠ” ê²ƒì´ ì¤‘ìš”í•©ë‹ˆë‹¤.

WSSáµ¢ (Working Set Size) ì•Œê³ ë¦¬ì¦˜

í”„ë¡œì„¸ìŠ¤ê°€ ìµœê·¼ ì¼ì • ì‹œê°„(Î”) ë™ì•ˆ ì‹¤ì œë¡œ ì‚¬ìš©í•˜ëŠ” í˜ì´ì§€ ì§‘í•©(Working Set) ì„
ê¸°ë°˜ìœ¼ë¡œ ë©”ëª¨ë¦¬ í”„ë ˆì„ì„ ë™ì ìœ¼ë¡œ ê´€ë¦¬

ë™ì‘ ì›ë¦¬
ê° í”„ë¡œì„¸ìŠ¤ ğ‘–ì— ëŒ€í•´
â€œìµœê·¼ Î”ì‹œê°„ ë™ì•ˆ ì°¸ì¡°ëœ í˜ì´ì§€ ì§‘í•©â€ì„ ì¶”ì 

ğ‘Šğ‘†ğ‘†ğ‘– = âˆ£ {pagesÂ referencedÂ byÂ processÂ ğ‘– inÂ lastÂ Î”} âˆ£ WSS i

2. ì „ì²´ í”„ë¡œì„¸ìŠ¤ì˜ ì´ ë©”ëª¨ë¦¬ ìˆ˜ìš” ê³„ì‚°
	D = i âˆ‘ â€‹WSSiâ€‹

3. íŒë‹¨
   - ğ· â‰¤ ğ‘€
   - D â‰¤ M â†’ ì •ìƒ (No Thrashing)
   - ğ· > ğ‘€ â†’ Thrashing ë°œìƒ â‡’ ì¼ë¶€ í”„ë¡œì„¸ìŠ¤ ì¤‘ë‹¨(Suspend) ë˜ëŠ” í”„ë ˆì„ íšŒìˆ˜
     

| êµ¬ë¶„      | PFF            | WSSáµ¢             |
| ------- | -------------- | ---------------- |
| ê¸°ì¤€      | í˜ì´ì§€ í´íŠ¸ìœ¨        | ìµœê·¼ Î” ë‚´ ì°¸ì¡° í˜ì´ì§€ ì§‘í•© |
| ë°©ì‹      | ë°˜ì‘í˜• (Reactive) | ì˜ˆì¸¡í˜• (Predictive) |
| ì¡°ì • ë‹¨ìœ„   | í”„ë¡œì„¸ìŠ¤ë³„ í”„ë ˆì„ ìˆ˜    | ì „ì²´ ë©”ëª¨ë¦¬ ìˆ˜ìš”        |
| ê³„ì‚° ì˜¤ë²„í—¤ë“œ | ë‚®ìŒ             | ë†’ìŒ               |
| ì¥ì       | ë¹ ë¥¸ ëŒ€ì‘          | ìŠ¤ë ˆì‹± ì‚¬ì „ ë°©ì§€        |
| ë‹¨ì       | ë‹¨ê¸° ë³€ë™ ë¯¼ê°       | êµ¬í˜„ ë³µì¡            |



7. ìš´ì˜ì²´ì œë³„ ìŠ¤ì™‘ ë°©ì‹ ì°¨ì´ (ë¦¬ëˆ…ìŠ¤ vs ìœˆë„ìš°)

ìš´ì˜ì²´ì œë§ˆë‹¤ ê°€ìƒ ë©”ëª¨ë¦¬ êµ¬í˜„ê³¼ ìŠ¤ì™‘ ê´€ë¦¬ì— ì•½ê°„ì˜ ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤. ì—¬ê¸°ì„œëŠ” ëŒ€í‘œì ìœ¼ë¡œ ë¦¬ëˆ…ìŠ¤ì™€ ìœˆë„ìš°ì˜ ìŠ¤ì™‘(í˜ì´ì§€ íŒŒì¼) ë°©ì‹ì„ ë¹„êµí•©ë‹ˆë‹¤.

ìŠ¤ì™‘ ê³µê°„ì˜ í˜•íƒœ: ë¦¬ëˆ…ìŠ¤(Linux) ì‹œìŠ¤í…œì—ì„œëŠ” ì „í†µì ìœ¼ë¡œ ë³„ë„ì˜ ë””ìŠ¤í¬ íŒŒí‹°ì…˜ì„ ìŠ¤ì™‘ ì˜ì—­ìœ¼ë¡œ í™•ë³´í•˜ëŠ” ë°©ì‹ì„ ì‚¬ìš©í•´ì™”ìŠµë‹ˆë‹¤. ì¦‰, ì„¤ì¹˜ ì‹œ ì¼ì • ìš©ëŸ‰ì˜ íŒŒí‹°ì…˜ì„ ì•„ì˜ˆ ìŠ¤ì™‘ ì „ìš©ìœ¼ë¡œ í• ë‹¹í•˜ì—¬ ì‚¬ìš©í•˜ê±°ë‚˜, í•„ìš” ì‹œ ì¼ë°˜ íŒŒì¼ì‹œìŠ¤í…œ ìœ„ì— ìŠ¤ì™‘ íŒŒì¼ì„ ë§Œë“¤ì–´ ì‚¬ìš©í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë°˜ë©´ ìœˆë„ìš°(Windows) ì‹œìŠ¤í…œì—ì„œëŠ” **ìŠ¤ì™‘ ê³µê°„ì„ í•˜ë‚˜ì˜ ë””ìŠ¤í¬ íŒŒì¼(pagefile.sys)**ë¡œ ê´€ë¦¬í•˜ëŠ” ê²ƒì´ ì¼ë°˜ì ì…ë‹ˆë‹¤. ìœˆë„ìš°ì˜ í˜ì´ì§€íŒŒì¼ì€ ì‹œìŠ¤í…œ ë“œë¼ì´ë¸Œ(C:)ì— ìˆ¨ê¹€ íŒŒì¼ë¡œ ì¡´ì¬í•˜ë©°, ìš´ì˜ì²´ì œê°€ ë™ì ìœ¼ë¡œ ê·¸ í¬ê¸°ë¥¼ ê´€ë¦¬í•©ë‹ˆë‹¤. ìš”ì•½í•˜ë©´ **ìœ ë‹‰ìŠ¤ ê³„ì—´ OSëŠ” â€œswapâ€ íŒŒí‹°ì…˜(ë˜ëŠ” íŒŒì¼)ì„, ìœˆë„ìš°ëŠ” â€œí˜ì´ì§€ íŒŒì¼â€**ì„ í†µí•´ ê°€ìƒ ë©”ëª¨ë¦¬ ìŠ¤ì™‘ì„ êµ¬í˜„í•˜ë©°, ê°œë…ì ìœ¼ë¡œ ë‘ ë°©ì‹ ëª¨ë‘ ë””ìŠ¤í¬ìƒì˜ ê°€ìƒ ë©”ëª¨ë¦¬ ì˜ì—­ì´ë¼ëŠ” ì ì—ì„œëŠ” ìœ ì‚¬í•©ë‹ˆë‹¤.

í¬ê¸° ë° ê´€ë¦¬ ë°©ì‹: ìœˆë„ìš°ëŠ” ê¸°ë³¸ ì„¤ì •ìœ¼ë¡œ í˜ì´ì§€ íŒŒì¼ì˜ ìµœì†Œ/ìµœëŒ€ í¬ê¸°ë¥¼ ìë™ìœ¼ë¡œ ê´€ë¦¬í•©ë‹ˆë‹¤. ì¼ë°˜ì ìœ¼ë¡œ ìµœì†Œ í¬ê¸°ë¥¼ RAM ìš©ëŸ‰ì˜ 1.5ë°°, ìµœëŒ€ 4ë°° ì •ë„ë¡œ ê¶Œì¥í•˜ë©°, ì‹œìŠ¤í…œ ì—¬ê±´ì— ë”°ë¼ ìš´ì˜ì²´ì œê°€ í˜ì´ì§€íŒŒì¼ í¬ê¸°ë¥¼ ì¡°ì ˆí•©ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ìˆ˜ë™ìœ¼ë¡œ ì´ ê°’ì„ ë³€ê²½í•˜ê±°ë‚˜ ê³ ì •í•  ìˆ˜ë„ ìˆìŠµë‹ˆë‹¤. ë°˜ë©´ ë¦¬ëˆ…ìŠ¤ì˜ ìŠ¤ì™‘ íŒŒí‹°ì…˜ì€ ê³ ì • í¬ê¸°ì´ë¯€ë¡œ ì„¤ì¹˜ ì‹œ ì„¤ì •í•œ ìš©ëŸ‰ ë‚´ì—ì„œë§Œ ì‚¬ìš©ë©ë‹ˆë‹¤ (ìŠ¤ì™‘ íŒŒí‹°ì…˜ì€ ë¯¸ë¦¬ ì—°ì†ëœ ê³µê°„ì„ í™•ë³´í•˜ë¯€ë¡œ ì¡°ê°í™” ì—†ì´ ë¹ ë¥´ê²Œ ì ‘ê·¼ ê°€ëŠ¥). ìµœê·¼ ë¦¬ëˆ…ìŠ¤ì—ì„œë„ ìŠ¤ì™‘ íŒŒì¼ ì‚¬ìš©ì´ í”í•´ì¡ŒëŠ”ë°, ìŠ¤ì™‘ íŒŒì¼ì€ í¬ê¸° ì¡°ì ˆì´ ë¹„êµì  ìš©ì´í•˜ë‚˜ íŒŒì¼ì‹œìŠ¤í…œ ìœ„ì— ìˆì–´ ì¡°ê°í™”ì˜ ì˜í–¥ì„ ë°›ì„ ìˆ˜ ìˆë‹¤ëŠ” ì°¨ì´ê°€ ìˆìŠµë‹ˆë‹¤. ë¦¬ëˆ…ìŠ¤ ê´€ë¦¬ìëŠ” í•„ìš” ì‹œ fallocate ë“±ì˜ ëª…ë ¹ìœ¼ë¡œ ìŠ¤ì™‘ íŒŒì¼ì„ ìƒì„±/í™•ì¥í•˜ì—¬ ì‚¬ìš©í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

ìŠ¤ì™‘ ì‚¬ìš© ì •ì±…: ë¦¬ëˆ…ìŠ¤ ì»¤ë„ì—ëŠ” **swappiness**ë¼ëŠ” íŒŒë¼ë¯¸í„°ê°€ ìˆì–´ ë©”ëª¨ë¦¬ê°€ ì¶©ë¶„í•´ë„ ìŠ¤ì™‘ì„ ì–´ëŠ ì •ë„ í™œìš©í• ì§€ë¥¼ ê²°ì •í•©ë‹ˆë‹¤. ê¸°ë³¸ê°’(60)ì€ ë¹„êµì  ì ê·¹ì ìœ¼ë¡œ ìŠ¤ì™‘ì„ ì‚¬ìš©í•˜ì—¬ ìºì‹œ ê³µê°„ì„ í™•ë³´í•˜ë ¤ëŠ” ì„±í–¥ì´ê³ , ê°’ì´ ë‚®ìœ¼ë©´ ê°€ëŠ¥í•œ RAMì„ ë‹¤ ì“°ê³  ë‚˜ì„œì•¼ ìŠ¤ì™‘ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ìœˆë„ìš°ì—ëŠ” ì§ì ‘ì ìœ¼ë¡œ ëŒ€ì‘ë˜ëŠ” íŠœë‹ íŒŒë¼ë¯¸í„°ëŠ” ì—†ì§€ë§Œ, ë©”ëª¨ë¦¬ ì••ë ¥ì´ ë†’ì•„ì§ˆ ë•Œë§Œ í˜ì´ì§€íŒŒì¼ì„ í™œìš©í•˜ëŠ” ê²½í–¥ì´ ìˆìŠµë‹ˆë‹¤. ë˜í•œ í˜„ëŒ€ ìœˆë„ìš°(ì˜ˆ: Windows 10 ì´í›„)ëŠ” ë©”ëª¨ë¦¬ ì••ì¶• ê¸°ëŠ¥ì„ ë„ì…í•˜ì—¬, ìŠ¤ì™‘ìœ¼ë¡œ ë³´ë‚´ê¸° ì „ì— ë©”ëª¨ë¦¬ ë‚´ì˜ ë°ì´í„°ë¥¼ ì••ì¶•í•¨ìœ¼ë¡œì¨ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ ì‚¬ìš©ì„ ìµœì í™”í•˜ê³  ë””ìŠ¤í¬ ìŠ¤ì™‘ì„ ì¤„ì´ë ¤ëŠ” ë…¸ë ¥ì„ í•©ë‹ˆë‹¤.

ì¶”ê°€ì ì¸ ì°¨ì´ì : ìœˆë„ìš° 8/10 ì´ìƒì—ì„œëŠ” ê¸°ë³¸ í˜ì´ì§€íŒŒì¼ ì™¸ì— swapfile.sysë¼ëŠ” ì¶”ê°€ íŒŒì¼ì„ ì‚¬ìš©í•©ë‹ˆë‹¤. ì´ ì‘ì€ ìŠ¤ì™‘ íŒŒì¼(~~200MB ìˆ˜ì¤€)ëŠ” UWP/ë©”íŠ¸ë¡œ ì•± ë“±ì˜ íŠ¹ì • ë©”ëª¨ë¦¬ ê´€ë¦¬ì— í™œìš©ë˜ë©°, ì¼ë°˜ í”„ë¡œì„¸ìŠ¤ì˜ ë©”ëª¨ë¦¬ ê´€ë¦¬ì— ì‚¬ìš©ë˜ëŠ” pagefile.sysì™€ ì—­í• ì„ êµ¬ë¶„í•©ë‹ˆë‹¤. ë¦¬ëˆ…ìŠ¤ì—ëŠ” ì´ì™€ ëŒ€ì‘ë˜ëŠ” ì´ì¤‘ êµ¬ì¡°ëŠ” ì—†ìœ¼ë©°, ëª¨ë“  ìŠ¤ì™‘ ê³µê°„ì´ í†µí•©ëœ ë¦¬ì†ŒìŠ¤ë¡œ í™œìš©ë©ë‹ˆë‹¤. ëŒ€ì‹  ë¦¬ëˆ…ìŠ¤ëŠ” ì—¬ëŸ¬ ê°œì˜ ìŠ¤ì™‘ íŒŒí‹°ì…˜/íŒŒì¼ì„ ê°€ì§ˆ ìˆ˜ ìˆê³  ìš°ì„ ìˆœìœ„ë¥¼ ì§€ì •í•˜ì—¬ ì‚¬ìš©í•˜ëŠ” ê¸°ëŠ¥ì„ ì œê³µí•©ë‹ˆë‹¤.

ìš”ì•½í•˜ë©´, ë¦¬ëˆ…ìŠ¤ì™€ ìœˆë„ìš° ëª¨ë‘ ê°€ìƒ ë©”ëª¨ë¦¬ë¥¼ ìœ„í•´ ë””ìŠ¤í¬ë¥¼ í™œìš©í•˜ì§€ë§Œ êµ¬í˜„ ì„¸ë¶€ê°€ ë‹¤ë¦…ë‹ˆë‹¤. ë¦¬ëˆ…ìŠ¤ëŠ” ì „í†µì ìœ¼ë¡œ ì „ìš© ìŠ¤ì™‘ íŒŒí‹°ì…˜ì„ ì“°ê³  swappiness ë“±ìœ¼ë¡œ ë™ì‘ì„ ì¡°ì ˆí•˜ë©°, ìœˆë„ìš°ëŠ” ìœ ë™ì ì¸ í˜ì´ì§€íŒŒì¼ì„ ì‚¬ìš©í•˜ê³  ìë™ í¬ê¸° ê´€ë¦¬ë¥¼ í•©ë‹ˆë‹¤. ì´ëŸ¬í•œ ì°¨ì´ì—ë„ ë¶ˆêµ¬í•˜ê³  ê¶ê·¹ì ìœ¼ë¡œ ì–‘ìª½ ëª¨ë‘ ë¶€ì¡±í•œ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ë¥¼ ë³´ì™„í•˜ê¸° ìœ„í•´ ë””ìŠ¤í¬ë¥¼ ì‚¬ìš©í•˜ëŠ” ì›ë¦¬ëŠ” ë™ì¼í•©ë‹ˆë‹¤.

8. ëª‡ê°€ì§€ ê°€ìƒ ì‹œë‚˜ë¦¬ì˜¤
### ê°€ìƒ ì‹œë‚˜ë¦¬ì˜¤

>> ì‚¬ìš©ìê°€ ë©”ëª¨ì¥(NotePad) í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ëŠ” ìƒí™©.


    1. **í”„ë¡œê·¸ë¨ ì‹¤í–‰ ìš”ì²­**
    - ì‚¬ìš©ìê°€ ë©”ëª¨ì¥ì„ ì‹¤í–‰í•˜ë©´ OSëŠ” notepad.exe íŒŒì¼ì„ ë””ìŠ¤í¬(SSD/HDD)ì—ì„œ ì½ìŠµë‹ˆë‹¤.
    - ì´ ì‹¤í–‰ íŒŒì¼ì€ ìˆ˜ MB í¬ê¸°ì¼ ìˆ˜ ìˆì§€ë§Œ, OSëŠ” ì²˜ìŒë¶€í„° ì „ë¶€ ë©”ëª¨ë¦¬ì— ì˜¬ë¦¬ì§€ ì•ŠìŠµë‹ˆë‹¤.
    - ëŒ€ì‹ , ì‹¤í–‰ì— í•„ìš”í•œ ìµœì†Œí•œì˜ í˜ì´ì§€(ì˜ˆ: ì½”ë“œ ì²« ë¶€ë¶„)ë§Œ ë¡œë“œí•˜ê³ , ë‚˜ë¨¸ì§€ëŠ” "í•„ìš”í•  ë•Œ ê°€ì ¸ì˜¤ë„ë¡" í‘œì‹œí•©ë‹ˆë‹¤.
    - ì´ ë°©ì‹ì„ **Demanding Page**ë¼ê³  í•©ë‹ˆë‹¤.

    2. **ì²« ì‹¤í–‰ ì¤‘ í˜ì´ì§€ í´íŠ¸ ë°œìƒ**
    - í”„ë¡œê·¸ë¨ì´ ì‹œì‘ë˜ë©´, CPUëŠ” main() í•¨ìˆ˜ì˜ ì²« ëª…ë ¹ì–´ë¥¼ ì‹¤í–‰í•˜ë ¤ê³  í•©ë‹ˆë‹¤.
    - ê·¸ëŸ°ë° í•´ë‹¹ ì½”ë“œê°€ ì•„ì§ ë””ìŠ¤í¬ì—ë§Œ ìˆê³  RAMì—ëŠ” ì—†ëŠ” ìƒíƒœì…ë‹ˆë‹¤.
    - MMUê°€ í˜ì´ì§€ í…Œì´ë¸”ì„ í™•ì¸í–ˆëŠ”ë°, ìœ íš¨ ë¹„íŠ¸ê°€ êº¼ì ¸ ìˆìŠµë‹ˆë‹¤.(ì¦‰,0)
    - CPUê°€ í˜ì´ì§€ í´íŠ¸ ì˜ˆì™¸(Page Fault Exception ì¦‰, trap)ë¥¼ ë°œìƒì‹œí‚µë‹ˆë‹¤. 

    trap -> ì œì–´ê¶Œì´ CPUì—ì„œ ì»¤ë„ë¡œ ë„˜ì–´ê° -> ë””ìŠ¤í¬ Exe ì‹¤í–‰ íŒŒì¼ì„ ì½ì–´ì˜´ -> ë¹ˆ ë©”ëª¨ë¦¬ í”„ë ˆì„(4Kb)ì„ í™•ë³´ -> ë””ìŠ¤í¬ì—ì„œ ë©”ëª¨ë¦¬ë¡œ í˜ì´ì§€ ë³µì‚¬ -> í˜ì´ì§€ í…Œì´ë¸” ê°±ì‹ (ê°€ìƒì£¼ì†Œ <-> ë¬¼ë¦¬ì£¼ì†Œ ì—°ê²°) -> í´íŠ¸ê°€ ë°œìƒí–ˆë˜ ëª…ë ¹ì–´ ì¬ì‹¤í–‰

    ì´ ì¼ë ¨ì˜ ê³¼ì •ì„ í†µí•´ CPUëŠ” ë‹¤ì‹œ main() í•¨ìˆ˜ë¥¼ ì •ìƒì ìœ¼ë¡œ ì‹¤í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

    3. **í”„ë¡œê·¸ë¨ì´ ì ì  ì»¤ì§€ë©° ì¶”ê°€ í´íŠ¸ ë°œìƒ**
    - ì‚¬ìš©ìê°€ ë©”ëª¨ì¥ì— í…ìŠ¤íŠ¸ë¥¼ ì…ë ¥í•˜ê±°ë‚˜, íŒŒì¼ì„ ì—´ë©´ í”„ë¡œê·¸ë¨ì€ ì¶”ê°€ ë°ì´í„° ì˜ì—­(heap, stack)ì— ì ‘ê·¼í•˜ê²Œ ë©ë‹ˆë‹¤.
    - ì´ë•Œë„ ì•„ì§ ë©”ëª¨ë¦¬ì— ì—†ëŠ” í˜ì´ì§€ì— ì ‘ê·¼í•˜ë©´ ìƒˆë¡œìš´ í˜ì´ì§€ í´íŠ¸ê°€ ë°œìƒí•˜ê³ , OSê°€ ê·¸ë•Œê·¸ë•Œ(On-demand) í•„ìš”í•œ í˜ì´ì§€ë¥¼ ë¶ˆëŸ¬ì˜µë‹ˆë‹¤.

    4. **í˜ì´ì§€ êµì²´(page Replacement)**
    - ë§Œì•½ RAMì´ ê°€ë“ ì°¼ë‹¤ë©´?
    OSëŠ” ì˜¤ë˜ì“°ì§€ì•Šì€ í˜ì´ì§€(LRU ì•Œê³ ë¦¬ì¦˜ ë“±)ë¥¼ ë””ìŠ¤í¬ì˜ ìŠ¤ì™‘ ì˜ì—­ìœ¼ë¡œ ë‚´ë³´ë‚´ê³ , ìƒˆ í˜ì´ì§€ë¥¼ ë©”ëª¨ë¦¬ì— ì˜¬ë¦½ë‹ˆë‹¤.
    - ì´ë•Œë„ í´íŠ¸ê°€ ë°œìƒí•˜ë©´, ì´ê±´ ì •ìƒì ì¸ êµì²´ ê³¼ì •ì…ë‹ˆë‹¤. 

>> Trapì´ë€ CPUê°€ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•˜ëŠ” ë„ì¤‘, **ì˜ë„ì ìœ¼ë¡œ ì»¤ë„**ë¡œ ì œì–´ë¥¼ ë„˜ê¸°ëŠ” ì¸í„°ëŸ½íŠ¸ ì…ë‹ˆë‹¤.
 
System Call Trap: ì‚¬ìš©ì í”„ë¡œê·¸ë¨ì´ ì»¤ë„ ì„œë¹„ìŠ¤ë¥¼ ìš”ì²­í•  ë•Œ|read(), write()
Exception Trap: ì‹¤í–‰ ì¤‘ ì˜¤ë¥˜ë‚˜ íŠ¹ìˆ˜ ìƒí™© ë°œìƒ | 0ìœ¼ë¡œ ë‚˜ëˆ„ê¸°, í˜ì´ì§€ í´íŠ¸ ë“±
Debug Trap: ë””ë²„ê¹… ì‹œì  ì œì–´ìš©(Breakpoint, Single-step ì‹¤í–‰)

9. ìš”ì•½ ë° ê²°ë¡ 

ê°€ìƒ ë©”ëª¨ë¦¬ëŠ” ìš´ì˜ì²´ì œê°€ ì œê³µí•˜ëŠ” ë©”ëª¨ë¦¬ ê´€ë¦¬ì˜ í•µì‹¬ ê¸°ìˆ ë¡œì„œ, í•œì •ëœ ë¬¼ë¦¬ ë©”ëª¨ë¦¬ë¡œë„ ë‹¤ì¤‘ í”„ë¡œì„¸ìŠ¤ í™˜ê²½ì„ êµ¬í˜„í•˜ê³  ëŒ€ìš©ëŸ‰ í”„ë¡œê·¸ë¨ì„ ì‹¤í–‰í•  ìˆ˜ ìˆê²Œ í•©ë‹ˆë‹¤. í˜ì´ì§€ì™€ í”„ë ˆì„ ë‹¨ìœ„ì˜ ì£¼ì†Œ ë³€í™˜, í˜ì´ì§€ í…Œì´ë¸”ê³¼ TLBë¥¼ í†µí•œ íš¨ìœ¨ì ì¸ ë§¤í•‘, ë””ìŠ¤í¬ ìŠ¤ì™‘ ê³µê°„ í™œìš©ì„ í†µí•œ ë©”ëª¨ë¦¬ í™•ì¥ ë“±ì˜ ì›ë¦¬ë¥¼ ë°”íƒ•ìœ¼ë¡œ, ê°€ìƒ ë©”ëª¨ë¦¬ëŠ” í”„ë¡œì„¸ìŠ¤ë§ˆë‹¤ ë…ë¦½ì ì´ê³  ê±°ëŒ€í•œ ê°€ìƒ ì£¼ì†Œ ê³µê°„ì„ ì œê³µí•˜ì—¬ ì‹œìŠ¤í…œ ì„±ëŠ¥ê³¼ ì•ˆì •ì„±ì„ ë†’ì…ë‹ˆë‹¤.

ë¬¼ë¡  ê°€ìƒ ë©”ëª¨ë¦¬ ì‚¬ìš©ì—ëŠ” ì•½ê°„ì˜ ì„±ëŠ¥ ì˜¤ë²„í—¤ë“œì™€ êµ¬í˜„ ë³µì¡ì„±ì´ ë”°ë¥´ë©°, íŠ¹íˆ í˜ì´ì§€ í´íŠ¸ ë°œìƒì´ ì¦ì„ ê²½ìš° ìŠ¤ë˜ì‹±ìœ¼ë¡œ ì¸í•œ ì„±ëŠ¥ ì €í•˜ë¥¼ ìœ ë°œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤. ë”°ë¼ì„œ ìš´ì˜ì²´ì œëŠ” íš¨ìœ¨ì ì¸ í˜ì´ì§€ êµì²´ ì•Œê³ ë¦¬ì¦˜ê³¼ ë©”ëª¨ë¦¬ ë¶€ë‹´ ì œì–´ ì •ì±…ì„ í†µí•´ ì´ëŸ¬í•œ ë¬¸ì œë¥¼ ì™„í™”í•©ë‹ˆë‹¤. í˜„ëŒ€ì˜ ë¦¬ëˆ…ìŠ¤, ìœˆë„ìš° ë“± ì£¼ìš” OSëŠ” ê°€ìƒ ë©”ëª¨ë¦¬ë¥¼ ê¸°ë°˜ìœ¼ë¡œ ë™ì‘í•˜ë©´ì„œë„ ê°ê¸° ê³ ìœ í•œ ë°©ì‹ìœ¼ë¡œ ìŠ¤ì™‘ì„ ê´€ë¦¬í•˜ì—¬ ìµœì ì˜ ì„±ëŠ¥ì„ ë„ëª¨í•©ë‹ˆë‹¤.

ê²°ë¡ ì ìœ¼ë¡œ, ê°€ìƒ ë©”ëª¨ë¦¬ëŠ” ì œí•œëœ ë©”ëª¨ë¦¬ ìì›ì„ ìµœëŒ€í•œ í™œìš©í•˜ì—¬ ì»´í“¨í„° ì‹œìŠ¤í…œì˜ ê°€ëŠ¥ì„±ì„ í™•ì¥í•˜ëŠ” í•„ìˆ˜ì ì¸ ê¸°ìˆ ì…ë‹ˆë‹¤. ì´ ë³´ê³ ì„œì—ì„œ ë‹¤ë£¬ ê°œë…ë“¤ê³¼ ë™ì‘ ì›ë¦¬, ê·¸ë¦¬ê³  ë‹¤ì–‘í•œ ì¸¡ë©´ì˜ ê³ ë ¤ì‚¬í•­ì„ í†µí•´ ê°€ìƒ ë©”ëª¨ë¦¬ ì‹œìŠ¤í…œì— ëŒ€í•œ ì´í•´ë¥¼ ë†’ì´ê³ ì í•©ë‹ˆë‹¤. ìš´ì˜ì²´ì œì˜ ê°€ìƒ ë©”ëª¨ë¦¬ ê´€ë¦¬ì— ëŒ€í•œ ê¹Šì€ ì´í•´ëŠ” ì‹œìŠ¤í…œ ì„±ëŠ¥ íŠœë‹, ì†Œí”„íŠ¸ì›¨ì–´ ê°œë°œ ìµœì í™”, ê·¸ë¦¬ê³  ì»´í“¨í„° ê³µí•™ ì—°êµ¬ ë“± ì—¬ëŸ¬ ë¶„ì•¼ì—ì„œ ì¤‘ìš”í•œ ë°‘ê±°ë¦„ì´ ë©ë‹ˆë‹¤

ì°¸ê³ ìë£Œ: geeksforgeeks, stackoverflow, techtarget, superuse
